import{r as e,d as t,o as a,c as l,w as s,a as o,e as u,t as i,x as r,b as n,p,y as c,T as d,n as f,F as m,K as x,i as _,f as h,g as b,h as g,j as y,q as v,I as k,ae as C,aD as w,aE as z,J as S}from"./index.ceec0680.js";import{_ as j}from"./page-meta.7314eaca.js";import{_ as V}from"./u-avatar.03495294.js";import{_ as I}from"./u-icon.0c807563.js";import{_ as B}from"./u-popup.4ec2fed5.js";import{_ as A}from"./plugin-vue_export-helper.21dcd24c.js";var $=A({name:"u-action-sheet",emits:["update:modelValue","input","click","close"],props:{value:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1},maskCloseAble:{type:Boolean,default:!0},list:{type:Array,default:()=>[]},tips:{type:Object,default:()=>({text:"",color:"",fontSize:"26"})},cancelBtn:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!1},borderRadius:{type:[String,Number],default:0},zIndex:{type:[String,Number],default:0},cancelText:{type:String,default:"取消"},labelName:{type:String,default:"text"},blur:{type:[Number,String],default:0}},computed:{valueCom(){return this.modelValue},tipsStyle(){let e={};return this.tips.color&&(e.color=this.tips.color),this.tips.fontSize&&(e.fontSize=this.tips.fontSize+"rpx"),e},itemStyle(){return e=>{let t={};return this.list[e].color&&(t.color=this.list[e].color),this.list[e].fontSize&&(t.fontSize=this.list[e].fontSize+"rpx"),this.list[e].disabled&&(t.color="#c0c4cc"),t}},uZIndex(){return this.zIndex?this.zIndex:this.$u.zIndex.popup}},data:()=>({popupValue:!1}),watch:{valueCom(e,t){this.popupValue=e}},methods:{close(){this.popupClose(),this.$emit("close")},popupClose(){this.$emit("input",!1),this.$emit("update:modelValue",!1)},itemClick(e){this.list[e].disabled||(this.$emit("click",e),this.$emit("input",!1),this.$emit("update:modelValue",!1))}}},[["render",function(h,b,g,y,v,k){const C=x,w=_,z=e(t("u-popup"),B);return a(),l(z,{blur:g.blur,mode:"bottom","border-radius":g.borderRadius,popup:!1,modelValue:v.popupValue,"onUpdate:modelValue":b[2]||(b[2]=e=>v.popupValue=e),maskCloseAble:g.maskCloseAble,length:"auto",safeAreaInsetBottom:g.safeAreaInsetBottom,onClose:k.popupClose,"z-index":k.uZIndex},{default:s((()=>[g.tips.text?(a(),l(w,{key:0,class:"u-tips u-border-bottom",style:o([k.tipsStyle])},{default:s((()=>[u(C,null,{default:s((()=>[i(r(g.tips.text),1)])),_:1})])),_:1},8,["style"])):n("v-if",!0),(a(!0),p(m,null,c(g.list,((e,t)=>(a(),l(w,{key:t,onTouchmove:b[0]||(b[0]=d((()=>{}),["stop","prevent"])),onClick:e=>k.itemClick(t),style:o([k.itemStyle(t)]),class:f(["u-action-sheet-item u-line1",[t<g.list.length-1?"u-border-bottom":""]]),"hover-stay-time":150},{default:s((()=>[u(C,null,{default:s((()=>[i(r(e[g.labelName]),1)])),_:2},1024),e.subText?(a(),l(C,{key:0,class:"u-action-sheet-item__subtext u-line-1"},{default:s((()=>[i(r(e.subText),1)])),_:2},1024)):n("v-if",!0)])),_:2},1032,["onClick","style","class"])))),128)),g.cancelBtn?(a(),l(w,{key:1,class:"u-gab"})):n("v-if",!0),g.cancelBtn?(a(),l(w,{key:2,onTouchmove:b[1]||(b[1]=d((()=>{}),["stop","prevent"])),class:"u-actionsheet-cancel u-action-sheet-item","hover-class":"u-hover-class","hover-stay-time":150,onClick:k.close},{default:s((()=>[i(r(g.cancelText),1)])),_:1},8,["onClick"])):n("v-if",!0)])),_:1},8,["blur","border-radius","modelValue","maskCloseAble","safeAreaInsetBottom","onClose","z-index"])}],["__scopeId","data-v-2487f0c2"]]);var T=A(h({__name:"index",setup(o){const c=b(),d=g((()=>c.userInfo)),f=y([{text:"修改密码"},{text:"忘记密码"}]),x=y(!1),h=e=>{k({url:e})},B=()=>{if(!d.value.has_password)return k({url:"/pages/change_pwd/index?type=set"});x.value=!0},A=e=>{switch(e){case 0:k({url:"/bundle/pages/change_pwd/index"});break;case 1:k({url:"/pages/forget_pwd/forget_pwd"})}},T=()=>{C({content:"是否退出登录？",confirmColor:"#4173FF",success:({cancel:e})=>{e||(c.logout(),w({url:"/pages/login/login"}))}})};return(o,c)=>{const b=e(t("page-meta"),j),g=e(t("u-avatar"),V),y=_,k=e(t("u-icon"),I),C=z,w=S,N=e(t("u-action-sheet"),$);return a(),p(m,null,[u(b,{"page-style":o.$theme.pageStyle},null,8,["page-style"]),u(y,{class:"user-set"},{default:s((()=>[v(d).is_staff?(a(),l(y,{key:0,class:"card"},{default:s((()=>[u(C,{url:"/bundle/pages/user_profile/index"},{default:s((()=>[u(y,{class:"item flex bg-white rounded-[20rpx]"},{default:s((()=>[u(g,{src:v(d).avatar,shape:"square",size:100},null,8,["src"]),u(y,{class:"ml-[20rpx] flex flex-1 justify-between items-center"},{default:s((()=>[u(y,null,{default:s((()=>[u(y,{class:"mb-[15rpx] text-xl font-medium"},{default:s((()=>[i(r(v(d).name),1)])),_:1}),u(y,{class:"text-content text-xs"},{default:s((()=>[i("工号："+r(v(d).sn),1)])),_:1})])),_:1}),u(k,{name:"arrow-right",color:"#666"})])),_:1})])),_:1})])),_:1})])),_:1})):n("v-if",!0),v(d).is_staff?(a(),l(y,{key:1,class:"card"},{default:s((()=>[u(y,{class:"u-flex justify-between my-[10rpx]",onClick:B},{default:s((()=>[u(y,{class:"text-[30rpx]"},{default:s((()=>[i("登录密码")])),_:1}),u(y,{class:"text-[#909399]"},{default:s((()=>{var e;return[i(r((null==(e=v(d))?void 0:e.has_password)?"已设置":"未设置"),1),u(k,{name:"arrow-right",color:"#909399",size:"24"})]})),_:1})])),_:1})])),_:1})):n("v-if",!0),u(y,{class:"card"},{default:s((()=>[v(d).is_staff?(a(),l(y,{key:0,class:"u-flex justify-between mt-[10rpx] mb-[40rpx]",onClick:c[0]||(c[0]=e=>h("/bundle/pages/user_info/index"))},{default:s((()=>[u(y,{class:"text-[30rpx]"},{default:s((()=>[i("个人资料")])),_:1}),u(y,null,{default:s((()=>[u(k,{name:"arrow-right",color:"#909399",size:"24"})])),_:1})])),_:1})):n("v-if",!0),v(d).is_staff?(a(),l(y,{key:1,class:"u-flex justify-between mt-[30rpx] mb-[40rpx]",onClick:c[1]||(c[1]=e=>h("/bundle/pages/authentication/index"))},{default:s((()=>[u(y,{class:"text-[30rpx]"},{default:s((()=>[i("实名信息")])),_:1}),u(y,null,{default:s((()=>[u(k,{name:"arrow-right",color:"#909399",size:"24"})])),_:1})])),_:1})):n("v-if",!0),u(y,{class:"u-flex justify-between mt-[30rpx] mb-[40rpx]",onClick:c[2]||(c[2]=e=>h("/pages/agreement/agreement?id=3"))},{default:s((()=>[u(y,{class:"text-[30rpx]"},{default:s((()=>[i("服务协议")])),_:1}),u(y,null,{default:s((()=>[u(k,{name:"arrow-right",color:"#909399",size:"24"})])),_:1})])),_:1}),u(y,{class:"u-flex justify-between mt-[30rpx] mb-[40rpx]",onClick:c[3]||(c[3]=e=>h("/pages/agreement/agreement?id=4"))},{default:s((()=>[u(y,{class:"text-[30rpx]"},{default:s((()=>[i("隐私协议")])),_:1}),u(y,null,{default:s((()=>[u(k,{name:"arrow-right",color:"#909399",size:"24"})])),_:1})])),_:1}),u(y,{class:"u-flex justify-between mt-[30rpx] mb-[10rpx]",onClick:c[4]||(c[4]=e=>h("/pages/about_us/index"))},{default:s((()=>[u(y,{class:"text-[30rpx]"},{default:s((()=>[i("关于我们")])),_:1}),u(y,null,{default:s((()=>[u(k,{name:"arrow-right",color:"#909399",size:"24"})])),_:1})])),_:1})])),_:1}),u(y,{class:"mt-[60rpx]"},{default:s((()=>[u(w,{class:"bg-primary text-lg text-white",onClick:T},{default:s((()=>[i(" 退出登录 ")])),_:1})])),_:1})])),_:1}),u(N,{list:f.value,modelValue:x.value,"onUpdate:modelValue":c[5]||(c[5]=e=>x.value=e),onClick:A,"safe-area-inset-bottom":!0},null,8,["list","modelValue"])],64)}}}),[["__scopeId","data-v-7616fef6"]]);export{T as default};
