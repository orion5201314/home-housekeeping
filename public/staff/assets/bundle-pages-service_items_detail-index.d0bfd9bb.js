import{o as t,c as e,w as a,e as r,p as o,y as l,n as i,T as s,a as n,t as u,x as d,b as c,F as m,S as f,i as p,ba as g,bb as b,f as y,u as h,bc as _,h as v,r as x,d as C,q as k,R as P,I as w,j,ah as S,K as R,g as I,s as N,m as B,bd as L,be as M,ab as $,J as z}from"./index.ceec0680.js";import{_ as A}from"./page-meta.7314eaca.js";import{_ as F}from"./mp-html.bced5b3e.js";import{_ as O}from"./u-empty.4626c10e.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";import{n as E}from"./util.52efa071.js";import{_ as H}from"./u-image.d192f048.js";import{_ as U}from"./u-popup.4ec2fed5.js";import{P as Y}from"./index.a4984710.js";import{e as q}from"./goods.6fb68686.js";import"./u-icon.0c807563.js";var J=V({name:"u-swiper",emits:["click","change"],props:{list:{type:Array,default:()=>[]},title:{type:Boolean,default:!1},indicator:{type:Object,default:()=>({})},borderRadius:{type:[Number,String],default:8},interval:{type:[String,Number],default:3e3},mode:{type:String,default:"round"},height:{type:[Number,String],default:250},indicatorPos:{type:String,default:"bottomCenter"},effect3d:{type:Boolean,default:!1},effect3dPreviousMargin:{type:[Number,String],default:50},autoplay:{type:Boolean,default:!0},duration:{type:[Number,String],default:500},circular:{type:Boolean,default:!0},imgMode:{type:String,default:"aspectFill"},name:{type:String,default:"image"},bgColor:{type:String,default:"#f3f4f6"},current:{type:[Number,String],default:0},titleStyle:{type:Object,default:()=>({})}},watch:{list(t,e){t.length!==e.length&&(this.uCurrent=0)},current(t){this.uCurrent=t}},data(){return{uCurrent:this.current}},computed:{justifyContent(){return"topLeft"==this.indicatorPos||"bottomLeft"==this.indicatorPos?"flex-start":"topCenter"==this.indicatorPos||"bottomCenter"==this.indicatorPos?"center":"topRight"==this.indicatorPos||"bottomRight"==this.indicatorPos?"flex-end":void 0},titlePaddingBottom(){let t=0;return"none"==this.mode?"12rpx":(t=["bottomLeft","bottomCenter","bottomRight"].indexOf(this.indicatorPos)>=0&&"number"==this.mode?"60rpx":["bottomLeft","bottomCenter","bottomRight"].indexOf(this.indicatorPos)>=0&&"number"!=this.mode?"40rpx":"12rpx",t)},elCurrent(){return Number(this.current)}},methods:{listClick(t){this.$emit("click",t)},change(t){let e=t.detail.current;this.uCurrent=e,this.$emit("change",e)},animationfinish(t){}}},[["render",function(y,h,_,v,x,C){const k=f,P=p,w=g,j=b;return t(),e(P,{class:"u-swiper-wrap",style:n({borderRadius:`${_.borderRadius}rpx`})},{default:a((()=>[r(j,{current:C.elCurrent,onChange:C.change,onAnimationfinish:C.animationfinish,interval:_.interval,circular:_.circular,duration:_.duration,autoplay:_.autoplay,"previous-margin":_.effect3d?_.effect3dPreviousMargin+"rpx":"0","next-margin":_.effect3d?_.effect3dPreviousMargin+"rpx":"0",style:n({height:_.height+"rpx",backgroundColor:_.bgColor})},{default:a((()=>[(t(!0),o(m,null,l(_.list,((o,l)=>(t(),e(w,{class:"u-swiper-item",key:l},{default:a((()=>[r(P,{class:i(["u-list-image-wrap",[x.uCurrent!=l?"u-list-scale":""]]),onClick:s((t=>C.listClick(l)),["stop","prevent"]),style:n({borderRadius:`${_.borderRadius}rpx`,transform:_.effect3d&&x.uCurrent!=l?"scaleY(0.9)":"scaleY(1)",margin:_.effect3d&&x.uCurrent!=l?"0 20rpx":0})},{default:a((()=>[r(k,{class:"u-swiper-image",src:o[_.name]||o,mode:_.imgMode},null,8,["src","mode"]),_.title&&o.title?(t(),e(P,{key:0,class:"u-swiper-title u-line-1",style:n([{"padding-bottom":C.titlePaddingBottom},_.titleStyle])},{default:a((()=>[u(d(o.title),1)])),_:2},1032,["style"])):c("v-if",!0)])),_:2},1032,["onClick","class","style"])])),_:2},1024)))),128))])),_:1},8,["current","onChange","onAnimationfinish","interval","circular","duration","autoplay","previous-margin","next-margin","style"]),r(P,{class:"u-swiper-indicator",style:n({top:"topLeft"==_.indicatorPos||"topCenter"==_.indicatorPos||"topRight"==_.indicatorPos?"12rpx":"auto",bottom:"bottomLeft"==_.indicatorPos||"bottomCenter"==_.indicatorPos||"bottomRight"==_.indicatorPos?"12rpx":"auto",justifyContent:C.justifyContent,padding:"0 "+(_.effect3d?"74rpx":"24rpx")})},{default:a((()=>["rect"==_.mode?(t(!0),o(m,{key:0},l(_.list,((a,r)=>(t(),e(P,{class:i(["u-indicator-item-rect",{"u-indicator-item-rect-active":r==x.uCurrent}]),key:r},null,8,["class"])))),128)):c("v-if",!0),"dot"==_.mode?(t(!0),o(m,{key:1},l(_.list,((a,r)=>(t(),e(P,{class:i(["u-indicator-item-dot",{"u-indicator-item-dot-active":r==x.uCurrent}]),key:r},null,8,["class"])))),128)):c("v-if",!0),"round"==_.mode?(t(!0),o(m,{key:2},l(_.list,((a,r)=>(t(),e(P,{class:i(["u-indicator-item-round",{"u-indicator-item-round-active":r==x.uCurrent}]),key:r},null,8,["class"])))),128)):c("v-if",!0),"number"==_.mode?(t(),e(P,{key:3,class:"u-indicator-item-number"},{default:a((()=>[u(d(x.uCurrent+1)+"/"+d(_.list.length),1)])),_:1})):c("v-if",!0)])),_:1},8,["style"])])),_:1},8,["style"])}],["__scopeId","data-v-37003b61"]]);const K=y({__name:"index",props:{content:{default:{data:[]}},mode:{default:"round"},height:{default:"340"},indicatorPos:{default:"bottomCenter"},effect3d:{type:Boolean,default:!1},autoplay:{type:Boolean,default:!0},interval:{default:"2500"},circular:{type:Boolean,default:!0},current:{default:0},name:{default:"image"},borderRadius:{default:0}},setup(a){const r=a,{getImageUrl:o}=h();_((()=>{var t;try{const e=null==r?void 0:r.content,a=null==(t=null==e?void 0:e.data)?void 0:t.length;if(!a)return;for(let t=0;t<a;t++){const a=e.data[t];a.image=o(a.image)}}catch(e){console.log("轮播图数据错误",e)}}));const l=v((()=>r.content.data||[])),i=t=>{var e;const a=null==(e=r.content.data[t])?void 0:e.link;a&&E(a)};return(r,o)=>{const s=x(C("u-swiper"),J);return k(l).length?(t(),e(s,{key:0,list:k(l),mode:a.mode,height:a.height,effect3d:a.effect3d,"indicator-pos":a.indicatorPos,autoplay:a.autoplay,interval:a.interval,circular:a.circular,"border-radius":a.borderRadius,current:a.current,name:a.name,onClick:i},null,8,["list","mode","height","effect3d","indicator-pos","autoplay","interval","circular","border-radius","current","name"])):c("v-if",!0)}}});var T=V(y({__name:"card",props:{title:{default:""},url:{default:""},border_bottom:{type:Boolean,default:!0}},setup(o){const l=o,s=()=>{l.url&&w({url:l.url})};return(l,n)=>{const m=p;return t(),e(m,{class:"card",onClick:s},{default:a((()=>[c(" 卡片头部 "),o.title.length?(t(),e(m,{key:0,class:i(["card--header flex justify-between truncate",{bb:o.border_bottom}])},{default:a((()=>[r(m,{class:"title truncate font-bold"},{default:a((()=>[u(d(o.title),1)])),_:1}),P(l.$slots,"header-right",{},void 0,!0)])),_:3},8,["class"])):c("v-if",!0),c(" 内容商品 "),P(l.$slots,"default",{},void 0,!0)])),_:3})}}}),[["__scopeId","data-v-796df93e"]]);var D=V(y({__name:"goods-spec",props:{goodsImage:{default:""},goodsName:{default:""},goodsPrice:{default:""},itemLists:{default:[]}},emits:["confirm"],setup(i,{expose:s,emit:n}){const f=i;j(1);const g=j(!1);return s({showPop:g}),(s,n)=>{const b=x(C("u-image"),H),y=p,h=R,_=x(C("u-popup"),U);return t(),e(_,{modelValue:g.value,"onUpdate:modelValue":n[1]||(n[1]=t=>g.value=t),height:"860",mode:"bottom","border-radius":"0",closeable:!0,onClose:n[2]||(n[2]=t=>g.value=!1),"safe-area-inset-bottom":!0},{default:a((()=>[r(y,{class:"p-[25rpx]"},{default:a((()=>[c(" Header Start "),r(y,{class:"flex col-start"},{default:a((()=>[r(y,{onClick:n[0]||(n[0]=t=>{S({current:0,urls:f.goodsImage.map((t=>t.image))})})},{default:a((()=>[r(b,{src:i.goodsImage,width:"200",height:"200","border-radius":"14rpx"},null,8,["src"])])),_:1}),r(y,{class:"m-[20rpx]"},{default:a((()=>[r(y,{class:"text-xl font-medium normal h-[120rpx]"},{default:a((()=>[u(d(i.goodsName),1)])),_:1}),r(y,{class:"text-primary"},{default:a((()=>[r(Y,{price:i.goodsPrice,priceFontSize:"36rpx",priceIconFontSize:"26rpx"},null,8,["price"])])),_:1})])),_:1})])),_:1}),c(" Header End "),c(" Main Start "),r(y,{class:"mt-[44rpx]"},{default:a((()=>[r(y,{class:"text-muted mb-[30rpx]"},{default:a((()=>[u("项目")])),_:1}),r(y,{class:"list"},{default:a((()=>[(t(!0),o(m,null,l(i.itemLists,(i=>(t(),e(y,{class:"item u-flex justify-between font-bold",key:i.id},{default:a((()=>[r(y,{class:"flex flex-1"},{default:a((()=>[(t(!0),o(m,null,l(i.sku_value_arr,((o,l)=>(t(),e(y,{key:l},{default:a((()=>[r(h,null,{default:a((()=>[u(d(o),1)])),_:2},1024),l+1<i.sku_value_arr.length?(t(),e(h,{key:0},{default:a((()=>[u("/")])),_:1})):c("v-if",!0)])),_:2},1024)))),128))])),_:2},1024),r(y,null,{default:a((()=>[u("￥"+d(i.price),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),c(" Main End ")])),_:1})])),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-9ac5c3f8"]]);var G=V(y({__name:"index",setup(i){const s=j({}),n=I();v((()=>n.token));const f=j(!0),g=j(""),b=N();j({year:"",date:"",start_time:"",end_time:""}),h();const y=()=>{b.value.showPop=!0},_=()=>{$({url:"/pages/index/index"})};return B((t=>{g.value=(null==t?void 0:t.id)||0,(async()=>{s.value=await q({id:g.value})})()})),(i,n)=>{const g=x(C("page-meta"),A),h=p,v=R,k=x(C("mp-html"),F),P=z,w=x(C("u-empty"),O);return t(),o(m,null,[r(g,{"page-style":i.$theme.pageStyle},null,8,["page-style"]),L(r(h,{class:"goods"},{default:a((()=>[c(" 轮播图 "),r(K,{content:s.value.goods_image,height:"750",indicatorPos:"bottomRight",mode:"number",borderRadius:20},null,8,["content"]),c(" 商品信息 "),r(h,{class:"goods-desc"},{default:a((()=>{var i;return[r(h,{class:"u-flex justify-between"},{default:a((()=>[r(h,{class:"text-primary"},{default:a((()=>[r(Y,{price:s.value.price},null,8,["price"])])),_:1}),r(h,{class:"text-xs normal text-[#707070]"},{default:a((()=>[u(" 已售"+d(s.value.sale_num),1)])),_:1})])),_:1}),r(h,{class:"mt-[16rpx] mb-[20rpx]"},{default:a((()=>[r(v,{class:"font-bold u-font-36 mt-[20rpx] mb-[20rpx]"},{default:a((()=>[u(d(s.value.name),1)])),_:1})])),_:1}),(null==(i=s.value)?void 0:i.label)?(t(),e(h,{key:0,class:"u-flex flex-wrap text-[#707070] text-[24rpx]"},{default:a((()=>[(t(!0),o(m,null,l(s.value.label,((r,o)=>(t(),e(v,{key:o},{default:a((()=>[u(d(r),1),o+1<s.value.label.length?(t(),e(v,{key:0,class:"mr-[10rpx] ml-[10rpx]"},{default:a((()=>[u("|")])),_:1})):c("v-if",!0)])),_:2},1024)))),128))])),_:1})):c("v-if",!0)]})),_:1}),c(" 服务详情 "),r(h,{class:"pb-[140rpx]"},{default:a((()=>[r(T,{title:"服务详情",border_bottom:!1},{default:a((()=>[r(h,{class:"service-content"},{default:a((()=>[r(k,{content:s.value.content},null,8,["content"])])),_:1})])),_:1})])),_:1}),r(h,{class:"footer"},{default:a((()=>[c(' <u-button type="primary" size="medium" @click="onAppointment">查看规格</u-button> '),r(P,{class:"bg-primary text-lg text-white",onClick:y},{default:a((()=>[u(" 查看规格 ")])),_:1})])),_:1})])),_:1},512),[[M,f.value]]),L(r(h,{class:"empty"},{default:a((()=>[r(w,{text:"抱歉，该服务项目不存在~",src:"/static/images/empty/collection.png","icon-size":300,color:"#888888"},{bottom:a((()=>[r(h,{class:"empty-bottom"},{default:a((()=>[r(P,{class:"bg-primary text-lg text-white leading-[80rpx] h-[80rpx]",onClick:_},{default:a((()=>[u(" 去看看其它 ")])),_:1})])),_:1})])),_:1},8,["src"])])),_:1},512),[[M,!f.value]]),c(" 规格选择 "),r(D,{ref_key:"goodsSpecRef",ref:b,goodsImage:s.value.image,goodsName:s.value.name,goodsPrice:s.value.price,itemLists:s.value.sku},null,8,["goodsImage","goodsName","goodsPrice","itemLists"])],64)}}}),[["__scopeId","data-v-1c696326"]]);export{G as default};
