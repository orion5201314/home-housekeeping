import{o as e,c as a,w as l,R as t,n as u,i,f as s,j as o,s as r,l as n,m as d,p as c,e as m,F as f,y as p,b as v,t as g,$ as h,au as x,I as _,r as b,d as y,J as k,x as j}from"./index.ceec0680.js";import{_ as w}from"./page-meta.7314eaca.js";import{_ as S}from"./u-tabs.893c4858.js";import{_ as V}from"./u-image.d192f048.js";import{_ as C}from"./u-icon.0c807563.js";import{_ as F}from"./u-checkbox.76f7936e.js";import{E as $}from"./emitter.5b880544.js";import{_ as z}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as O}from"./z-paging.90c0db65.js";import{P as N}from"./index.a4984710.js";import{t as I}from"./util.52efa071.js";import{c as B,d as D}from"./goods.6fb68686.js";import"./u-badge.5f9f6552.js";var A=z({name:"u-checkbox-group",emits:["update:modelValue","input","change"],mixins:[$],props:{value:{type:[String,Number,Array,Boolean],default:""},modelValue:{type:[String,Number,Array,Boolean],default:""},max:{type:[Number,String],default:999},disabled:{type:Boolean,default:!1},name:{type:[Boolean,String],default:""},labelDisabled:{type:Boolean,default:!1},shape:{type:String,default:"square"},activeColor:{type:String,default:"#2979ff"},size:{type:[String,Number],default:34},width:{type:String,default:"auto"},wrap:{type:Boolean,default:!1},iconSize:{type:[String,Number],default:20}},data:()=>({values:[],uFromData:{inputAlign:"left"}}),created(){this.children=[]},mounted(){let e=this.$u.$parent.call(this,"u-form");e&&Object.keys(this.uFromData).map((a=>{this.uFromData[a]=e[a]}))},methods:{emitEvent(e){let a=this.values||[];if(e.value){-1===a.indexOf(e.name)&&a.push(e.name)}else{let l=a.indexOf(e.name);l>-1&&a.splice(l,1)}this.$emit("change",a),this.$emit("input",a),this.$emit("update:modelValue",a),setTimeout((()=>{this.dispatch("u-form-item","onFieldChange",a)}),60)},_emitEvent(e){let a=this.values||[];if(e.value){-1===a.indexOf(e.name)&&a.push(e.name)}else{let l=a.indexOf(e.name);l>-1&&a.splice(l,1)}}}},[["render",function(s,o,r,n,d,c){const m=i;return e(),a(m,{class:u(["u-checkbox-group u-clearfix","right"==d.uFromData.inputAlign?"flex-end":""])},{default:l((()=>[t(s.$slots,"default",{},void 0,!0)])),_:3},8,["class"])}],["__scopeId","data-v-aa6d1e54"]]);var E=z(s({__name:"index",setup(t){const u=o([]),s=o(0),$=r(null),z=o([]),E=o([]),U=o({}),J=o(0),P=async(e,a)=>{try{const{lists:l}=await B({category_id:u.value[s.value].id,page_no:e,page_size:a});l.map((e=>(-1!=E.value.indexOf(e.id)&&(e.checked=!0),e))),$.value.complete(l)}catch(l){console.log("报错=>",l),$.value.complete(!1)}},q=e=>{s.value=Number(e),$.value.reload()},Q=e=>{U.value[u.value[s.value].id]=e},R=()=>{if(!E.value)return I("请选择服务项目");h("serviceItems",E.value),x({delta:1})},T=e=>{_({url:e})};return n((()=>U.value),(e=>{for(const t in U.value)E.value=[...E.value,...U.value[t]];const a=[];for(var l=0;l<E.value.length;l++)-1===a.indexOf(E.value[l])&&a.push(E.value[l]);E.value=a}),{deep:!0}),d((async e=>{J.value=(null==e?void 0:e.skill_id)||0,E.value=e.goods_id?JSON.parse(e.goods_id):[],E.value=E.value.map(Number),await(async()=>{u.value=await D({}),$.value.reload()})()})),(t,o)=>{const r=b(y("page-meta"),w),n=b(y("u-tabs"),S),d=b(y("u-image"),V),h=i,x=b(y("u-icon"),C),_=b(y("u-checkbox"),F),I=b(y("u-checkbox-group"),A),B=b(y("z-paging"),O),D=k;return e(),c(f,null,[m(r,{"page-style":t.$theme.pageStyle},null,8,["page-style"]),m(h,{class:"flex flex-col min-h-0 h-full"},{default:l((()=>[m(n,{list:u.value,"bg-color":"#ffffff","active-color":t.$theme.primaryColor,"inactive-color":"#000000","is-scroll":!0,modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=e=>s.value=e),onChange:q,height:"80"},null,8,["list","active-color","modelValue"]),m(h,{class:"main h-full"},{default:l((()=>[m(B,{"auto-show-back-to-top":"",ref_key:"paging",ref:$,modelValue:z.value,"onUpdate:modelValue":o[1]||(o[1]=e=>z.value=e),onQuery:P,fixed:!1,height:"100%"},{default:l((()=>{var u;return[(null==(u=z.value)?void 0:u.length)>0?(e(),a(h,{key:0,class:"list"},{default:l((()=>[m(I,{onChange:Q,"active-color":t.$theme.primaryColor},{default:l((()=>[(e(!0),c(f,null,p(z.value,((t,u)=>(e(),a(h,{key:u,class:"card u-flex justify-between w-full"},{default:l((()=>[m(h,{class:"flex flex-1"},{default:l((()=>[m(d,{src:t.image,width:"130",height:"130","border-radius":"14rpx"},null,8,["src"]),m(h,{class:"ml-[20rpx] service-text w-[400rpx]"},{default:l((()=>[m(h,{class:"u-flex mt-[10rpx]",onClick:e=>T("/bundle/pages/service_items_detail/index?id="+t.id)},{default:l((()=>[m(h,{class:"truncate font-bold"},{default:l((()=>[g(j(t.name),1)])),_:2},1024),m(x,{name:"arrow-right",color:"#c8c9cc"})])),_:2},1032,["onClick"]),m(h,{class:"u-flex justify-between mt-[30rpx]"},{default:l((()=>[m(N,{price:t.price,priceFontSize:"36rpx",priceIconFontSize:"26rpx"},null,8,["price"])])),_:2},1024)])),_:2},1024)])),_:2},1024),m(h,null,{default:l((()=>[J.value?(e(),a(_,{key:0,name:t.id,modelValue:t.checked,"onUpdate:modelValue":e=>t.checked=e,disabled:-1==t.skill_id.indexOf(parseInt(J.value)),onChange:e=>((e,a)=>{z.value[a].checked=e.value,e.value||(E.value=E.value.filter((function(a){return a!==e.name})))})(e,u)},null,8,["name","modelValue","onUpdate:modelValue","disabled","onChange"])):v("v-if",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["active-color"])])),_:1})):v("v-if",!0)]})),_:1},8,["modelValue"])])),_:1}),v(" Footer Start "),m(h,{class:"footer"},{default:l((()=>[v(' <u-button v-if="skillId" type="primary" size="medium" @click="confirm">确定</u-button>\n\t\t    <u-button v-else type="primary" size="medium" @click="goPage(\'/bundle/pages/user_info/index\')">去修改</u-button> '),J.value?(e(),a(D,{key:0,class:"bg-primary text-lg text-white",onClick:R},{default:l((()=>[g(" 确定 ")])),_:1})):(e(),a(D,{key:1,class:"bg-primary text-lg text-white",onClick:o[2]||(o[2]=e=>T("/bundle/pages/user_info/index"))},{default:l((()=>[g(" 去修改 ")])),_:1}))])),_:1}),v(" Footer End ")])),_:1})],64)}}}),[["__scopeId","data-v-7aad0b28"]]);export{E as default};
