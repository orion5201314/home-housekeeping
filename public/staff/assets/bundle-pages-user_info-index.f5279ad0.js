import{r as e,d as t,o as l,c as a,w as s,e as u,b as o,a as i,t as r,x as n,T as d,n as c,i as p,K as f,f as v,j as m,m as _,a0 as y,B as x,a8 as g,aM as b,a1 as h,p as k,F as w,aN as j,aO as C,aP as S,I as V,z as $,aQ as I,ab as T}from"./index.ceec0680.js";import{_ as z}from"./page-meta.7314eaca.js";import{_ as O}from"./u-icon.0c807563.js";import{_ as U}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as A,a as B}from"./u-select.da66d86e.js";import{_ as E}from"./u-input.39fcd58d.js";import{_ as D}from"./u-button.aab08c00.js";import{u as M}from"./index.e6d3f860.js";import"./u-line.4170fb16.js";import"./u-popup.4ec2fed5.js";import"./emitter.5b880544.js";import"./util.52efa071.js";var N=U({name:"u-alert-tips",emits:["click","close"],props:{title:{type:String,default:""},type:{type:String,default:"warning"},description:{type:String,default:""},closeAble:{type:Boolean,default:!1},closeText:{type:String,default:""},showIcon:{type:Boolean,default:!1},color:{type:String,default:""},bgColor:{type:String,default:""},borderColor:{type:String,default:""},show:{type:Boolean,default:!0},icon:{type:String,default:""},iconStyle:{type:Object,default:()=>({})},titleStyle:{type:Object,default:()=>({})},descStyle:{type:Object,default:()=>({})}},data:()=>({}),computed:{uTitleStyle(){let e={};return e.fontWeight=this.description?500:"normal",this.$u.deepMerge(e,this.titleStyle)},uIcon(){return this.icon?this.icon:this.$u.type2icon(this.type)},uIconType(){return Object.keys(this.iconStyle).length?"":this.type}},methods:{click(){this.$emit("click")},close(){this.$emit("close")}}},[["render",function(v,m,_,y,x,g){const b=e(t("u-icon"),O),h=p,k=f;return _.show?(l(),a(h,{key:0,class:c(["u-alert-tips",[_.show?"":"u-close-alert-tips",_.type?"u-alert-tips--bg--"+_.type+"-light":"",_.type?"u-alert-tips--border--"+_.type+"-disabled":""]]),style:i({backgroundColor:_.bgColor,borderColor:_.borderColor})},{default:s((()=>[u(h,{class:"u-icon-wrap"},{default:s((()=>[_.showIcon?(l(),a(b,{key:0,name:g.uIcon,size:_.description?40:32,class:"u-icon",color:g.uIconType,"custom-style":_.iconStyle},null,8,["name","size","color","custom-style"])):o("v-if",!0)])),_:1}),u(h,{class:"u-alert-content",onClick:d(g.click,["stop"])},{default:s((()=>[u(h,{class:"u-alert-title",style:i([g.uTitleStyle])},{default:s((()=>[r(n(_.title),1)])),_:1},8,["style"]),_.description?(l(),a(h,{key:0,class:"u-alert-desc",style:i([_.descStyle])},{default:s((()=>[r(n(_.description),1)])),_:1},8,["style"])):o("v-if",!0)])),_:1},8,["onClick"]),u(h,{class:"u-icon-wrap"},{default:s((()=>[_.closeAble&&!_.closeText?(l(),a(b,{key:0,onClick:g.close,hoverClass:"u-type-error-hover-color",name:"close",color:"#c0c4cc",size:22,class:"u-close-icon",style:i({top:_.description?"18rpx":"24rpx"})},null,8,["onClick","style"])):o("v-if",!0)])),_:1}),_.closeAble&&_.closeText?(l(),a(k,{key:0,class:"u-close-text",style:i({top:_.description?"18rpx":"24rpx"})},{default:s((()=>[r(n(_.closeText),1)])),_:1},8,["style"])):o("v-if",!0)])),_:1},8,["class","style"])):o("v-if",!0)}],["__scopeId","data-v-3d389057"]]);var F=U(v({__name:"index",setup(i){const d=m(0),c=[{name:"服务技能"},{name:"个人资料"}],v=m({province_id:null,city_id:null,district_id:null,region:null,address:null,longitude:null,latitude:null,skill_id:"",goods_id:[],credentials_image:[],education:"",nation:"",verify_status:null,verify_remarks:""}),U=m(!1),F=m(""),J=m([]),K=m(!1),P=m(""),Q=m([]),W=m(!1),q=m(""),G=m([]),H=e=>{"upper"==e&&(d.value=d.value>0?d.value-=1:0),"down"==e&&(d.value=d.value<c.length-1?d.value+=1:c.length-1)},L=e=>{v.value.skill_id!==e[0].value&&(v.value.goods_id=[]),v.value.skill_id=e[0].value,F.value=e[0].label},R=()=>{v.value.skill_id?Z(`/bundle/pages/service_items/index?skill_id=${v.value.skill_id}&goods_id=${JSON.stringify(v.value.goods_id)}`):uni.$u.toast("请先选择服务技能")},X=e=>{v.value.education=e[0].value,P.value=e[0].label},Y=e=>{v.value.nation=e[0].value,q.value=e[0].label},Z=e=>{V({url:e})},ee=async()=>{$({title:"请稍后..."}),await I(v.value),T({url:"/pages/user_set/index"})};return _((async e=>{(async()=>{const e=await j();for(const l in v.value)void 0!==e[l]&&(v.value[l]=e[l]);v.value.region=e.province+" "+e.city+" "+e.district,F.value=e.skill_name,P.value=e.education_name,q.value=e.nation_name,(await C({})).forEach(((e,t)=>{J.value.push({value:e.id,label:e.name})}));const t=await S({});t.education.forEach(((e,t)=>{Q.value.push({value:t,label:e})})),t.nation.forEach(((e,t)=>{G.value.push({value:t,label:e})}))})(),y("choiceAddress",(async e=>{var t;v.value.longitude=e.longitude,v.value.latitude=e.latitude;try{const e=await x({location:`${v.value.latitude},${v.value.longitude}`});if(0==e.status){let l=e.result.ad_info.city_code.substr(3,6);11e4!=l&&31e4!=l&&21e4!=l&&41e4!=l||(l*=1,l+=100),v.value.city_id=l+"",v.value.province_id=v.value.city_id.substr(0,3)+"000",v.value.district_id=e.result.ad_info.adcode,v.value.address=(null==(t=e.result.address_component.street_number)?void 0:t.length)>0?e.result.address_component.street_number:e.result.address_component.street,v.value.region=`${e.result.ad_info.province} ${e.result.ad_info.city} ${e.result.ad_info.district}`}else g({title:e.message,icon:"none"})}catch(l){console.log("逆解析地址错误：",l)}})),y("serviceItems",(e=>{v.value.goods_id=e}))})),b((()=>{h(["choiceAddress"]),h(["serviceItems"])})),(i,m)=>{const _=e(t("page-meta"),z),y=e(t("u-alert-tips"),N),x=p,g=e(t("u-steps"),A),b=f,h=e(t("u-icon"),O),j=e(t("u-input"),E),C=e(t("u-select"),B),S=e(t("u-button"),D);return l(),k(w,null,[u(_,{"page-style":i.$theme.pageStyle},null,8,["page-style"]),u(x,{class:"main"},{default:s((()=>[u(x,null,{default:s((()=>[0===v.value.verify_status?(l(),a(y,{key:"verify_status"+v.value.verify_status,type:"primary","show-icon":!0,title:"资料审核中","title-style":{color:"#2189ff"}})):o("v-if",!0),2===v.value.verify_status?(l(),a(y,{key:"verify_status"+v.value.verify_status,type:"error","show-icon":!0,title:"审核拒绝",description:v.value.verify_remarks,"title-style":{color:"#fa3534"},"desc-style":{color:"#dd6161"}},null,8,["description"])):o("v-if",!0)])),_:1}),o(" 步骤条 "),u(x,{class:"pt-[50rpx] pb-[100rpx]"},{default:s((()=>[u(g,{list:c,current:d.value,mode:"number","active-color":"#ffffff","un-active-color":"#d5d5d5"},null,8,["current"])])),_:1}),u(x,{class:"content"},{default:s((()=>[0==d.value?(l(),a(x,{key:0},{default:s((()=>[u(x,{class:"padding-background u-flex justify-between mt-[40rpx] mb-[40rpx]"},{default:s((()=>[u(x,{class:"text-2xl font-bold"},{default:s((()=>[r("地址")])),_:1}),u(x,{class:"u-flex",onClick:m[0]||(m[0]=e=>Z("/bundle/pages/location/index"))},{default:s((()=>[u(b,{class:"text-muted mr-[10rpx]"},{default:s((()=>[r(n(v.value.region||"请选择地址"),1)])),_:1}),u(h,{name:"arrow-right",color:"#c8c9cc"})])),_:1})])),_:1}),u(x,{class:"padding-background mt-[40rpx] mb-[40rpx]"},{default:s((()=>[u(x,{class:"text-2xl font-bold"},{default:s((()=>[r("详细地址")])),_:1}),u(x,{class:"mt-[30rpx]"},{default:s((()=>[u(j,{modelValue:v.value.address,"onUpdate:modelValue":m[1]||(m[1]=e=>v.value.address=e),type:"textarea","auto-height":!1,clearable:!1,placeholder:"输入详细地址","custom-style":{height:"100rpx"}},null,8,["modelValue"])])),_:1})])),_:1}),u(x,{class:"padding-background u-flex justify-between mt-[40rpx] mb-[40rpx]"},{default:s((()=>[u(x,{class:"text-2xl font-bold"},{default:s((()=>[r("服务技能")])),_:1}),u(x,{class:"u-flex",onClick:m[2]||(m[2]=e=>U.value=!0)},{default:s((()=>[u(b,{class:"font-bold mr-[10rpx] text-muted"},{default:s((()=>[r(n(F.value),1)])),_:1}),u(h,{name:"arrow-right",color:"#c8c9cc"})])),_:1})])),_:1}),u(C,{modelValue:U.value,"onUpdate:modelValue":m[3]||(m[3]=e=>U.value=e),list:J.value,title:"服务技能",onConfirm:L},null,8,["modelValue","list"]),u(x,{class:"padding-background u-flex justify-between mt-[40rpx] mb-[40rpx]"},{default:s((()=>[u(x,{class:"text-2xl font-bold"},{default:s((()=>[r("服务项目")])),_:1}),u(x,{class:"u-flex",onClick:R},{default:s((()=>[u(b,{class:"font-bold mr-[10rpx] text-muted"},{default:s((()=>{var e;return[r(n((null==(e=v.value)?void 0:e.goods_id.length)||0)+"项目",1)]})),_:1}),u(h,{name:"arrow-right",color:"#c8c9cc"})])),_:1})])),_:1})])),_:1})):o("v-if",!0),1==d.value?(l(),a(x,{key:1},{default:s((()=>[o(' <view>\n\t\t\t\t\t<view class="text-2xl font-bold">工装照(头像)</view>\n\t\t\t\t\t<view class="pt-[30rpx] pb-[40rpx]">\n\t\t\t\t\t\t<uploader\n\t\t\t\t\t\t\tv-model="formData.work_image"\n\t\t\t\t\t\t\t:key="\'work_image\'+formData.work_image"\n\t\t\t\t\t\t\t:mutiple="false"\n\t\t\t\t\t\t\t:deletable="true"\n\t\t\t\t\t\t\t:width="200"\n\t\t\t\t\t\t\t:height="200"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\t\t\t\t</view> '),u(x,null,{default:s((()=>[u(x,{class:"text-2xl font-bold"},{default:s((()=>[r("证书(可上传多张)")])),_:1}),u(x,{class:"pt-[30rpx] pb-[40rpx]"},{default:s((()=>[(l(),a(M,{modelValue:v.value.credentials_image,"onUpdate:modelValue":m[4]||(m[4]=e=>v.value.credentials_image=e),key:"credentials_image"+v.value.credentials_image,mutiple:!0,maxUpload:10,deletable:!0,width:200,height:200},null,8,["modelValue"]))])),_:1})])),_:1}),u(x,{class:"padding-background u-flex justify-between mt-[40rpx] mb-[40rpx]"},{default:s((()=>[u(x,{class:"text-2xl font-bold"},{default:s((()=>[r("学历")])),_:1}),u(x,{class:"u-flex",onClick:m[5]||(m[5]=e=>K.value=!0)},{default:s((()=>[u(b,{class:"font-bold mr-[10rpx] text-muted"},{default:s((()=>[r(n(P.value),1)])),_:1}),u(h,{name:"arrow-right",color:"#c8c9cc"})])),_:1})])),_:1}),u(C,{modelValue:K.value,"onUpdate:modelValue":m[6]||(m[6]=e=>K.value=e),list:Q.value,title:"学历",onConfirm:X},null,8,["modelValue","list"]),u(x,{class:"padding-background u-flex justify-between mt-[40rpx] mb-[40rpx]"},{default:s((()=>[u(x,{class:"text-2xl font-bold"},{default:s((()=>[r("民族")])),_:1}),u(x,{class:"u-flex",onClick:m[7]||(m[7]=e=>W.value=!0)},{default:s((()=>[u(b,{class:"font-bold mr-[10rpx] text-muted"},{default:s((()=>[r(n(q.value),1)])),_:1}),u(h,{name:"arrow-right",color:"#c8c9cc"})])),_:1})])),_:1}),u(C,{modelValue:W.value,"onUpdate:modelValue":m[8]||(m[8]=e=>W.value=e),list:G.value,title:"民族",onConfirm:Y},null,8,["modelValue","list"])])),_:1})):o("v-if",!0)])),_:1})])),_:1}),o(" 底部按钮 "),0!==v.value.verify_status?(l(),a(x,{key:0,class:"footer u-flex justify-around"},{default:s((()=>[0===d.value?(l(),a(S,{key:0,class:"custom-style",size:"medium",onClick:m[9]||(m[9]=e=>H("down"))},{default:s((()=>[r("下一步")])),_:1})):o("v-if",!0),1===d.value?(l(),a(x,{key:1,class:"w-[200rpx] text-white text-center",onClick:m[10]||(m[10]=e=>H("upper"))},{default:s((()=>[r("上一步")])),_:1})):o("v-if",!0),o(' <u-button v-if="stepsCurrent === 1" type="primary" size="medium" @click="changeSteps(\'upper\')">上一步</u-button> '),1===d.value?(l(),a(S,{key:2,class:"custom-style",size:"medium",onClick:ee},{default:s((()=>[r("提交")])),_:1})):o("v-if",!0)])),_:1})):o("v-if",!0)],64)}}}),[["__scopeId","data-v-05075a6f"]]);export{F as default};
