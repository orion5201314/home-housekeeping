import{Z as e,r as t,d as a,o as l,c as o,w as s,e as r,a as c,b as n,t as i,x as u,n as d,T as h,i as p,aq as f,a7 as m,f as y,u as g,h as b,j as x,m as k,p as C,F as _,y as w,q as S,au as v}from"./index.ceec0680.js";import{_ as $}from"./page-meta.7314eaca.js";import{_ as I}from"./u-icon.0c807563.js";import{_ as B}from"./plugin-vue_export-helper.21dcd24c.js";var j=B({name:"u-search",emits:["update:modelValue","input","change","search","custom","clear","focus","blur"],props:{value:{type:String,default:""},modelValue:{type:String,default:""},shape:{type:String,default:"round"},bgColor:{type:String,default:"#f2f2f2"},placeholder:{type:String,default:"请输入关键字"},clearabled:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},showAction:{type:Boolean,default:!0},actionStyle:{type:Object,default:()=>({})},actionText:{type:String,default:"搜索"},inputAlign:{type:String,default:"left"},disabled:{type:Boolean,default:!1},animation:{type:Boolean,default:!1},borderColor:{type:String,default:"none"},height:{type:[Number,String],default:64},inputStyle:{type:Object,default:()=>({})},maxlength:{type:[Number,String],default:"-1"},searchIconColor:{type:String,default:""},color:{type:String,default:"#606266"},placeholderColor:{type:String,default:"#909399"},margin:{type:String,default:"0"},searchIcon:{type:String,default:"search"}},data(){return{keyword:"",showClear:!1,show:!1,focused:this.focus}},watch:{keyword(e){this.$emit("input",e),this.$emit("update:modelValue",e),this.$emit("change",e)},valueCom:{immediate:!0,handler(e){this.keyword=e}}},computed:{valueCom(){return this.modelValue},showActionBtn(){return!(this.animation||!this.showAction)},borderStyle(){return this.borderColor?`1px solid ${this.borderColor}`:"none"}},methods:{inputChange(e){this.keyword=e.detail.value},clear(){this.keyword="",this.$nextTick((()=>{this.$emit("clear")}))},search(t){this.$emit("search",t.detail.value);try{e()}catch(a){}},custom(){this.$emit("custom",this.keyword);try{e()}catch(t){}},getFocus(){this.focused=!0,this.animation&&this.showAction&&(this.show=!0),this.$emit("focus",this.keyword)},blur(){setTimeout((()=>{this.focused=!1}),100),this.show=!1,this.$emit("blur",this.keyword)},clickHandler(){this.disabled&&this.$emit("click")}}},[["render",function(e,m,y,g,b,x){const k=t(a("u-icon"),I),C=p,_=f;return l(),o(C,{class:"u-search",onClick:x.clickHandler,style:c({margin:y.margin})},{default:s((()=>[r(C,{class:"u-content",style:c({backgroundColor:y.bgColor,borderRadius:"round"==y.shape?"100rpx":"10rpx",border:x.borderStyle,height:y.height+"rpx"})},{default:s((()=>[r(C,{class:"u-icon-wrap"},{default:s((()=>[r(k,{class:"u-clear-icon",size:30,name:y.searchIcon,color:y.searchIconColor?y.searchIconColor:y.color},null,8,["name","color"])])),_:1}),r(_,{"confirm-type":"search",onBlur:x.blur,value:x.valueCom,onConfirm:x.search,onInput:x.inputChange,disabled:y.disabled,onFocus:x.getFocus,focus:y.focus,maxlength:y.maxlength,"placeholder-class":"u-placeholder-class",placeholder:y.placeholder,"placeholder-style":`color: ${y.placeholderColor}`,class:"u-input",type:"text",style:c([{textAlign:y.inputAlign,color:y.color,backgroundColor:y.bgColor},y.inputStyle])},null,8,["onBlur","value","onConfirm","onInput","disabled","onFocus","focus","maxlength","placeholder","placeholder-style","style"]),b.keyword&&y.clearabled&&b.focused?(l(),o(C,{key:0,class:"u-close-wrap",onClick:x.clear},{default:s((()=>[r(k,{class:"u-clear-icon",name:"close-circle-fill",size:"34",color:"#c0c4cc"})])),_:1},8,["onClick"])):n("v-if",!0)])),_:1},8,["style"]),r(C,{style:c([y.actionStyle]),class:d(["u-action",[x.showActionBtn||b.show?"u-action-active":""]]),onClick:h(x.custom,["stop","prevent"])},{default:s((()=>[i(u(y.actionText),1)])),_:1},8,["style","class","onClick"])])),_:1},8,["onClick","style"])}],["__scopeId","data-v-47eb8750"]]);var A=B(y({__name:"index",setup(e){const c=g(),d=b((()=>c.cityInfo)),h=x(""),f=x([]),y=async()=>{const e=await(t={keyword:h.value},m.get({url:"/region/city",data:t}));var t;f.value=e};return k((()=>{y()})),(e,m)=>{const g=t(a("page-meta"),$),b=p,x=t(a("u-search"),j),k=t(a("u-icon"),I);return l(),C(_,null,[r(g,{"page-style":e.$theme.pageStyle},null,8,["page-style"]),r(b,{class:"container"},{default:s((()=>[r(b,{class:"text-3xl font-bold mb-[30rpx]"},{default:s((()=>[i("选择城市")])),_:1}),n(" 搜索 "),r(x,{placeholder:"搜索城市名",modelValue:h.value,"onUpdate:modelValue":m[0]||(m[0]=e=>h.value=e),shape:"round",clearabled:!0,animation:!0,height:70,"bg-color":"#f2f2f2",onSearch:y,onCustom:y},null,8,["modelValue"]),n(" 定位城市 "),r(b,{class:"text-[24rpx] text-[#c8c9cc] mt-[30rpx] mb-[30rpx]"},{default:s((()=>[i("已开通以下城市")])),_:1}),r(b,null,{default:s((()=>[r(b,null,{default:s((()=>[n(" 城市列表 "),(l(!0),C(_,null,w(f.value,((e,t)=>(l(),o(b,{key:t,class:"anchor flex mb-[10rpx]"},{default:s((()=>[r(b,{class:"font-bold text-[32rpx]"},{default:s((()=>[i(u(t),1)])),_:2},1024),r(b,{class:"ml-[20rpx]"},{default:s((()=>[(l(!0),C(_,null,w(e,((e,t)=>(l(),o(b,{key:t,onClick:t=>(e=>{const t={city_id:e.id,latitude:e.db09_lat,longitude:e.db09_lng,cityName:e.name};c.setCityInfo(t),v()})(e),class:"pb-[40rpx] pt-[4rpx] w-[500rpx]"},{default:s((()=>[S(d).city_id!=e.id?(l(),o(b,{key:0},{default:s((()=>[i(u(e.name),1)])),_:2},1024)):(l(),o(b,{key:1,class:"u-flex justify-between"},{default:s((()=>[r(b,{class:"text-[#fa3534]"},{default:s((()=>[i(u(e.name),1)])),_:2},1024),r(k,{name:"checkmark",color:"#fa3534"})])),_:2},1024))])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-f046b81e"]]);export{A as default};
