import{f as e,j as a,m as s,ad as t,b3 as o,ae as l,ab as n,b5 as r,aM as u,o as c,c as i,w as d,q as v,b as p,S as m,i as f}from"./index.ceec0680.js";import{_}from"./plugin-vue_export-helper.21dcd24c.js";var y=_(e({__name:"toAlipay",setup(e){const _=a(),y=a(),g=a(),b=a();let w=a(!1);const h=a();return s((e=>{_.value=e.order_id,y.value=e.from,g.value=e.pay_way,b.value=e.key})),t((async()=>{if(navigator.userAgent.toLowerCase().match(/MicroMessenger/i))return w.value=!0,void(h.value=setInterval((()=>{o({from:y.value,order_id:_.value},b.value).then((function(e){console.log(e),1==e.pay_status&&(clearInterval(h.value),l({showCancel:!1,content:"支付成功",success:()=>{"deposit"==y.value&&n({url:"/bundle/pages/deposit/index"})}}))}))}),1e3));const e=await r({from:y.value,pay_way:g.value,order_id:_.value},b.value);console.log(e);const a=document.createElement("div");a.innerHTML=e.config,document.body.appendChild(a),document.forms[0].submit()})),u((e=>{clearInterval(h.value)})),(e,a)=>{const s=m,t=f;return c(),i(t,{class:"container"},{default:d((()=>[v(w)?(c(),i(s,{key:0,src:"/staff/assets/Alipay.44240aee.png",class:"img"})):p("v-if",!0)])),_:1})}}}),[["__scopeId","data-v-574d5506"]]);export{y as default};
