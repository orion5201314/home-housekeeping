import{f as e,j as a,l as t,m as s,o as l,p as u,b as i,e as c,w as r,F as v,y as d,c as o,t as m,aT as n,z as f,aU as x,i as _,a3 as p,J as y,r as b,d as k,x as w,n as h}from"./index.ceec0680.js";import{_ as C}from"./u-button.aab08c00.js";import{t as g}from"./util.52efa071.js";import{_ as j}from"./plugin-vue_export-helper.21dcd24c.js";var E=j(e({__name:"index",setup(e){const j=a({}),E=a(0),F=a(""),S=a([]),B=a(!0),M=async e=>{f({title:"操作中..."});let a=[];j.value.service_time[F.value].forEach((t=>{1!==t.status&&(t.status=e?2:0),2===t.status&&a.push(t.time)})),await x({day:F.value,busytime:a}),S.value=j.value.service_time[F.value]};return t((()=>S.value),(e=>{let a=0;e.forEach((e=>{0===e.status&&(a+=1)})),B.value=a>0}),{immediate:!0,deep:!0}),s((e=>{(async()=>{j.value=await n({}),F.value=j.value.day[E.value].date,S.value=j.value.service_time[F.value]})()})),(e,a)=>{const t=_,s=p,n=y,T=b(k("u-button"),C);return l(),u(v,null,[i(" Main Start "),c(t,{class:"time-box"},{default:r((()=>[(l(!0),u(v,null,d(S.value,((e,a)=>(l(),o(t,{key:a,class:h(["time-item",{booked:1===e.status,disabled:2===e.status}]),onClick:a=>(async e=>{if(1===e.status)return g("时间点已预约，不可操作");f({title:"操作中..."});let a=[];j.value.service_time[F.value].forEach((t=>{e.time===t.time&&(t.status=2===t.status?0:2),2===t.status&&a.push(t.time)})),await x({day:F.value,busytime:a}),S.value=j.value.service_time[F.value]})(e)},{default:r((()=>[2===e.status?(l(),o(t,{key:0,class:"text-[22rpx] text-muted"},{default:r((()=>[m("不可预约")])),_:1})):i("v-if",!0),1===e.status?(l(),o(t,{key:1,class:"text-[22rpx] text-muted"},{default:r((()=>[m("已预约")])),_:1})):i("v-if",!0),0===e.status?(l(),o(t,{key:2,class:"text-[22rpx] text-muted"},{default:r((()=>[m("可预约")])),_:1})):i("v-if",!0),c(t,{class:"font-bold text-[34rpx]"},{default:r((()=>[m(w(e.time),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1}),i(" Main End "),i(" Footer Start "),c(t,{class:"footer"},{default:r((()=>[c(s,{class:"scroll-view-box","scroll-x":"true"},{default:r((()=>[(l(!0),u(v,null,d(j.value.day,((e,a)=>(l(),o(t,{key:a,class:h(["day text-base flex-1 w-1/4",{active:E.value==a}]),onClick:e=>(e=>{E.value=e,F.value=j.value.day[E.value].date,S.value=j.value.service_time[F.value],console.log(S.value)})(a)},{default:r((()=>[c(t,{class:"text-sm text-muted"},{default:r((()=>[m(w(e.desc),1)])),_:2},1024),c(t,{class:"font-bold"},{default:r((()=>[m(w(e.date),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1}),c(t,{class:"pt-[30rpx] pb-[30rpx]"},{default:r((()=>[i(' <u-button type="primary" v-if="allBusytimeBtn" @click="setAllServiceTime(true)">全部忙</u-button> '),B.value?(l(),o(n,{key:0,class:"bg-primary text-lg text-white",onClick:a[0]||(a[0]=e=>M(!0))},{default:r((()=>[m(" 全部忙 ")])),_:1})):(l(),o(T,{key:1,type:"warning",onClick:a[1]||(a[1]=e=>M(!1))},{default:r((()=>[m("全部闲")])),_:1}))])),_:1})])),_:1}),i(" Footer End ")],64)}}}),[["__scopeId","data-v-262cf3d5"]]);export{E as default};
