import{_ as t}from"./page-meta.7314eaca.js";import{f as e,j as a,aV as i,L as s,h as o,l,o as r,c as n,w as c,R as u,b as d,n as f,a as h,aW as p,i as v,P as m,aH as x,e as g,k as b,g as y,aX as _,_ as C,aY as I,r as k,d as w,p as S,y as z,q as $,t as T,x as B,F as N,I as O,a3 as X,T as j,ah as R,s as W,m as Y}from"./index.ceec0680.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as M}from"./u-badge.5f9f6552.js";import{_ as H}from"./u-button.aab08c00.js";import{_ as A}from"./u-empty.4626c10e.js";import{g as E}from"./util.52efa071.js";import{_ as F}from"./z-paging.90c0db65.js";import{_ as L}from"./u-image.d192f048.js";import{_ as G}from"./u-icon.0c807563.js";import{a as P,b as U}from"./goods.6fb68686.js";var D=V(e({__name:"tab",props:{dot:{type:[Boolean,String],default:!1},name:{type:[Boolean,String],default:""},info:null},setup(t){const e=t,m=a(!1),x=a(!1),g=a(!1),b=a(void 0),y=i("updateTabs"),_=i("handleChange"),C=()=>{y&&y()},I=p();_(null==I?void 0:I.props,(t=>{b.value=b.value||t,m.value=t,g.value=b.value,x.value=t})),s((()=>{C()}));const k=o((()=>{const{dot:t,info:a}=e;return{dot:t,info:a}}));return l((()=>k.value),(()=>{C()})),l((()=>e.name),(t=>{C()})),(t,e)=>{const a=v;return r(),n(a,{class:f({active:m.value,inactive:!m.value,tab:!0}),style:h(x.value?"":"display: none;")},{default:c((()=>[g.value?u(t.$slots,"default",{key:0},void 0,!0):d("v-if",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-327343cc"]]);var Z=V({name:"u-sticky",emits:["fixed","unfixed"],props:{offsetTop:{type:[Number,String],default:0},index:{type:[Number,String],default:""},enable:{type:Boolean,default:!0},h5NavHeight:{type:[Number,String],default:44},bgColor:{type:String,default:"#ffffff"},zIndex:{type:[Number,String],default:""}},data(){return{fixed:!1,height:"auto",stickyTop:0,elClass:this.$u.guid(),left:0,width:"auto"}},watch:{offsetTop(t){this.initObserver()},enable(t){0==t?(this.fixed=!1,this.disconnectObserver("contentObserver")):this.initObserver()}},computed:{uZIndex(){return this.zIndex?this.zIndex:this.$u.zIndex.sticky}},mounted(){this.initObserver()},methods:{initObserver(){this.enable&&(this.stickyTop=0!=this.offsetTop?m(this.offsetTop)+this.h5NavHeight:this.h5NavHeight,this.disconnectObserver("contentObserver"),this.$uGetRect("."+this.elClass).then((t=>{this.height=t.height,this.left=t.left,this.width=t.width,this.$nextTick((()=>{this.observeContent()}))})))},observeContent(){this.disconnectObserver("contentObserver");const t=x(this,{thresholds:[.95,.98,1]});t.relativeToViewport({top:-this.stickyTop}),t.observe("."+this.elClass,(t=>{this.enable&&this.setFixed(t.boundingClientRect.top)})),this.contentObserver=t},setFixed(t){const e=t<this.stickyTop;e?this.$emit("fixed",this.index):this.fixed&&this.$emit("unfixed",this.index),this.fixed=e},disconnectObserver(t){const e=this[t];e&&e.disconnect()}},beforeUnmount(){this.disconnectObserver("contentObserver")}},[["render",function(t,e,a,i,s,o){const l=v;return r(),n(l,{class:""},{default:c((()=>[g(l,{class:f(["u-sticky-wrap",[s.elClass]]),style:h({height:s.fixed?s.height+"px":"auto",backgroundColor:a.bgColor})},{default:c((()=>[g(l,{class:"u-sticky",style:h({position:s.fixed?"fixed":"static",top:s.stickyTop+"px",left:s.left+"px",width:"auto"==s.width?"auto":s.width+"px",zIndex:o.uZIndex})},{default:c((()=>[u(t.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3},8,["class","style"])])),_:3})}],["__scopeId","data-v-9059106a"]]);var q=V(e({__name:"tabs",props:{isScroll:{type:Boolean,default:!0},current:{default:0},height:{default:80},fontSize:{default:28},duration:{default:.3},activeColor:{default:"#2073F4"},inactiveColor:{default:"#333"},barWidth:{default:40},barHeight:{default:4},gutter:{default:30},bgColor:{default:""},name:{default:"name"},count:{default:"count"},offset:{default:[5,20]},bold:{type:Boolean,default:!0},activeItemStyle:{default:{}},showBar:{type:Boolean,default:!1},barStyle:{default:{}},itemWidth:{default:"auto"},isFixed:{type:Boolean,default:!1},top:{default:0},stickyBgColor:{default:""},swipeable:{type:Boolean,default:!0},auth:{type:Boolean,default:!1},borderRadius:{default:"10"}},emits:["change"],setup(t,{emit:e}){const i=t,x=y(),j=o((()=>x.token)),{touch:R,resetTouchStatus:W,touchStart:Y,touchMove:V}=function(){const t=b({direction:"",deltaX:0,deltaY:0,offsetX:0,offsetY:0}),e=()=>{t.direction="",t.deltaX=0,t.deltaY=0,t.offsetX=0,t.offsetY=0};return{touch:t,resetTouchStatus:e,touchStart:a=>{e();const i=a.touches[0];t.startX=i.clientX,t.startY=i.clientY},touchMove:e=>{const a=e.touches[0];var i,s;t.deltaX=a.clientX-t.startX,t.deltaY=a.clientY-t.startY,t.offsetX=Math.abs(t.deltaX),t.offsetY=Math.abs(t.deltaY),t.direction=t.direction||((i=t.offsetX)>(s=t.offsetY)&&i>10?"horizontal":s>i&&s>10?"vertical":"")}}}(),F=a([]),L=a([]),G=a(0),P=a([]),U=a(0),D=a(0),q=a(0),Q=a("cu-tab"),J=a(i.current),K=a(!0),tt=a(!1),et=p();l((()=>F.value),(async(t,e)=>{K.value||t.length===e.length||(J.value=0),await _(),ot()})),l((()=>i.current),((t,e)=>{_((()=>{J.value=t,rt()}))}),{immediate:!0});const at=o((()=>{const t={width:i.barWidth+"rpx",transform:`translate(${D.value}px, -100%)`,"transition-duration":`${K.value?0:i.duration}s`,"background-color":i.activeColor,height:i.barHeight+"rpx",opacity:K.value?0:1,"border-radius":i.barHeight/2+"px"};return Object.assign(t,i.barStyle),t})),it=o((()=>t=>{let e={height:i.height+"rpx","line-height":i.height+"rpx","font-size":i.fontSize+"rpx",padding:i.isScroll?`0 ${i.gutter}rpx`:"",flex:i.isScroll?"auto":"1",width:`${i.itemWidth}rpx`,"border-radius":`${i.borderRadius}rpx`};return t==J.value&&i.bold&&(e.fontWeight="bold"),t==J.value?(e.color="#ffffff",e.backgroundColor=i.activeColor,e=Object.assign(e,i.activeItemStyle)):(e.color="#000000",e.backgroundColor="#ffffff"),e})),st=()=>{F.value=L.value.map((t=>{const{name:e,dot:a,active:i,inited:s}=t.event,{updateRender:o}=t;return{name:e,dot:a,active:i,inited:s,updateRender:o}}))},ot=async()=>{const t=await E("#"+Q.value,!1,et);q.value=t.left,U.value=t.width,lt()},lt=()=>{const t=C().in(et);for(let e=0;e<F.value.length;e++)t.select(`#tab-item-${e}`).fields({size:!0,rect:!0});t.exec((t=>{P.value=t,rt()}))},rt=()=>{const t=P.value[J.value];if(!t)return;const e=t.width,a=t.left-q.value-(U.value-e)/2;G.value=a<0?0:a;const s=t.left+t.width/2-q.value;D.value=s-m(i.barWidth)/2,1==K.value&&setTimeout((()=>{K.value=!1}),100),L.value.forEach(((t,e)=>{const a=e===J.value;a===t.event.active&&t.event.inited||t.updateRender(a)}))},nt=t=>{i.swipeable&&(tt.value=!0,Y(t))},ct=t=>{i.swipeable&&tt.value&&V(t)},ut=()=>{if(!i.swipeable||!tt.value)return;if("horizontal"===R.direction&&R.offsetX>=50){let t,a=F.value.length,i=J.value;t=R.deltaX<=0?i>=a-1?0:i+1:i<=0?a-1:i-1,_((()=>{J.value=t,rt()})),e("change",t)}tt.value=!1};return s((()=>{st()})),I("handleChange",((t,e)=>{L.value.push({event:t,updateRender:e})})),I("updateTabs",st),(a,i)=>{const s=k(w("u-badge"),M),o=v,l=X,p=k(w("u-sticky"),Z),m=k(w("u-button"),H),x=k(w("u-empty"),A);return r(),n(o,{class:"tabs"},{default:c((()=>[g(p,{enable:t.isFixed,"bg-color":t.stickyBgColor,"offset-top":t.top,"h5-nav-height":0},{default:c((()=>[g(o,{id:Q.value,style:h({background:t.bgColor})},{default:c((()=>[g(l,{style:h({height:t.height+"rpx"}),"scroll-x":"",class:"scroll-view","scroll-left":G.value,"scroll-with-animation":""},{default:c((()=>[g(o,{class:f(["scroll-box",{"tabs-scorll-flex":!t.isScroll}])},{default:c((()=>[(r(!0),S(N,null,z(F.value,((a,i)=>(r(),n(o,{class:"tab-item line1",id:"tab-item-"+i,key:i,onClick:t=>(t=>{t!=J.value&&(_((()=>{J.value=t,rt()})),e("change",t))})(i),style:h([$(it)(i)])},{default:c((()=>[g(s,{count:a[t.count]||a.dot||0,offset:t.offset,size:"mini"},null,8,["count","offset"]),T(" "+B(a[t.name]||a.name),1)])),_:2},1032,["id","onClick","style"])))),128)),t.showBar?(r(),n(o,{key:0,class:"tab-bar",style:h([$(at)])},null,8,["style"])):d("v-if",!0)])),_:1},8,["class"])])),_:1},8,["style","scroll-left"])])),_:1},8,["id","style"])])),_:1},8,["enable","bg-color","offset-top"]),g(o,{class:"tab-content",onTouchstart:nt,onTouchmove:ct,onTouchcancel:ut,onTouchend:ut},{default:c((()=>[d(' <view class="tab-track" :class="{\'tab-animated\': animated}" :style="[trackStyle]"> '),g(o,null,{default:c((()=>[$(j)&&t.auth?u(a.$slots,"default",{key:0},void 0,!0):(r(),n(x,{key:1,src:"/static/images/empty/order.png",text:"您还没有登录～",mode:"data","icon-size":300,"margin-top":"300",color:"#888888"},{bottom:c((()=>[g(o,{class:"mt-4"},{default:c((()=>[g(m,{shape:"circle",onClick:i[0]||(i[0]=t=>{O({url:"/pages/login/login"})}),ripple:!0,"hair-line":!1,type:"info"},{default:c((()=>[T(" 去登录")])),_:1})])),_:1})])),_:1},8,["src"]))])),_:3}),d(" </view> ")])),_:3})])),_:3})}}}),[["__scopeId","data-v-6362f17a"]]);var Q=V({name:"u-rate",emits:["update:modelValue","input","change"],props:{value:{type:[Number,String],default:-1},modelValue:{type:[Number,String],default:-1},count:{type:[Number,String],default:5},current:{type:[Number,String],default:0},disabled:{type:Boolean,default:!1},size:{type:[Number,String],default:32},inactiveColor:{type:String,default:"#b2b2b2"},activeColor:{type:String,default:"#FA3534"},gutter:{type:[Number,String],default:10},minCount:{type:[Number,String],default:0},allowHalf:{type:Boolean,default:!1},activeIcon:{type:String,default:"star-fill"},inactiveIcon:{type:String,default:"star"},customPrefix:{type:String,default:"uicon"},colors:{type:Array,default:()=>[]},icons:{type:Array,default:()=>[]}},data(){return{elId:this.$u.guid(),elClass:this.$u.guid(),starBoxLeft:0,activeIndex:0,starWidth:0,starWidthArr:[]}},created(){this.activeIndex=-1!=this.valueCom?this.valueCom:this.current},watch:{current(t){this.activeIndex=t},valueCom(t){this.activeIndex=t}},computed:{valueCom(){return this.modelValue},decimal(){return this.disabled?100*this.activeIndex%100:this.allowHalf?50:void 0},elActiveIcon(){const t=this.icons.length;if(t&&t<=this.count){const e=Math.round(this.activeIndex/Math.round(this.count/t));return e<1?this.icons[0]:e>t?this.icons[t-1]:this.icons[e-1]}return this.activeIcon},elActiveColor(){const t=this.colors.length;if(t&&t<=this.count){const e=Math.round(this.activeIndex/Math.round(this.count/t));return e<1?this.colors[0]:e>t?this.colors[t-1]:this.colors[e-1]}return this.activeColor}},methods:{getElRectById(){this.$uGetRect("#"+this.elId).then((t=>{this.starBoxLeft=t.left}))},getElRectByClass(){this.$uGetRect("."+this.elClass).then((t=>{this.starWidth=t.width;for(let e=0;e<this.count;e++)this.starWidthArr[e]=(e+1)*this.starWidth}))},touchMove(t){if(this.disabled)return;if(!t.changedTouches[0])return;const e=t.changedTouches[0].pageX-this.starBoxLeft;e<=0&&(this.activeIndex=0);let a=Math.ceil(e/this.starWidth);this.activeIndex=a>this.count?this.count:a,this.activeIndex<this.minCount&&(this.activeIndex=this.minCount),this.emitEvent()},click(t,e){this.disabled||(this.allowHalf,1==t?1==this.activeIndex?this.activeIndex=0:this.activeIndex=1:this.activeIndex=t,this.activeIndex<this.minCount&&(this.activeIndex=this.minCount),this.emitEvent())},emitEvent(){this.$emit("change",this.activeIndex),-1!=this.valueCom&&(this.$emit("input",this.activeIndex),this.$emit("update:modelValue",this.activeIndex))},showDecimalIcon(t){return this.disabled&&parseInt(this.activeIndex)===t}},mounted(){this.getElRectById(),this.getElRectByClass()}},[["render",function(t,e,a,i,s,o){const l=k(w("u-icon"),G),u=v;return r(),n(u,{class:"u-rate",id:s.elId,onTouchmove:j(o.touchMove,["stop","prevent"])},{default:c((()=>[(r(!0),S(N,null,z(a.count,((t,e)=>(r(),n(u,{class:f(["u-star-wrap",[s.elClass]]),key:e},{default:c((()=>[g(l,{name:s.activeIndex>e?o.elActiveIcon:a.inactiveIcon,onClick:t=>o.click(e+1,t),color:s.activeIndex>e?o.elActiveColor:a.inactiveColor,"custom-style":{fontSize:a.size+"rpx",padding:"0 "+(a.gutter/2+"rpx")},"custom-prefix":a.customPrefix,"show-decimal-icon":o.showDecimalIcon(e),percent:o.decimal,"inactive-color":a.inactiveColor},null,8,["name","onClick","color","custom-style","custom-prefix","show-decimal-icon","percent","inactive-color"])])),_:2},1032,["class"])))),128))])),_:1},8,["id","onTouchmove"])}],["__scopeId","data-v-08cb4236"]]);var J=V(e({__name:"card",props:{data:{default:{}}},setup:t=>(e,a)=>{const i=k(w("u-image"),L),s=v,o=k(w("u-rate"),Q);return r(),n(s,{class:"card"},{default:c((()=>[g(s,{class:"card--header flex justify-between col-start"},{default:c((()=>[g(s,{class:"flex"},{default:c((()=>[g(i,{src:t.data.user.avatar,width:"80",height:"80","border-radius":"50%"},null,8,["src"]),g(s,{class:"ml-[20rpx]"},{default:c((()=>[g(s,{class:"text-base normal font-medium"},{default:c((()=>[T(B(t.data.user.nickname),1)])),_:1}),g(s,{class:"text-muted text-xs mt-[10rpx]"},{default:c((()=>[T(B(t.data.create_time),1)])),_:1})])),_:1})])),_:1}),g(s,null,{default:c((()=>[g(o,{count:5,modelValue:t.data.service_comment,"onUpdate:modelValue":a[0]||(a[0]=e=>t.data.service_comment=e),size:"28","inactive-icon":"star-fill","active-color":"#ff9600",disabled:!0},null,8,["modelValue"])])),_:1})])),_:1}),g(s,{class:"card--main"},{default:c((()=>[d(' <view class="flex flex-wrap">\n\t\t\t\t<u-tag class="mt-[10rpx] mr-[10rpx]" text="专业负责" type="info" size="mini" color="#657390" bg-color="#f5f7f9" border-color="#f5f7f9" />\n\t\t\t\t<u-tag class="mt-[10rpx] mr-[10rpx]" text="专业负责" type="info" size="mini" color="#657390" bg-color="#f5f7f9" border-color="#f5f7f9" />\n\t\t\t\t<u-tag class="mt-[10rpx] mr-[10rpx]" text="专业负责" type="info" size="mini" color="#657390" bg-color="#f5f7f9" border-color="#f5f7f9" />\n\t\t\t\t<u-tag class="mt-[10rpx] mr-[10rpx]" text="专业负责" type="info" size="mini" color="#657390" bg-color="#f5f7f9" border-color="#f5f7f9" />\n\t\t\t\t<u-tag class="mt-[10rpx] mr-[10rpx]" text="专业负责" type="info" size="mini" color="#657390" bg-color="#f5f7f9" border-color="#f5f7f9" />\n\t\t\t\t<u-tag class="mt-[10rpx] mr-[10rpx]" text="专业负责" type="info" size="mini" color="#657390" bg-color="#f5f7f9" border-color="#f5f7f9" />\n\t\t\t\t<u-tag class="mt-[10rpx] mr-[10rpx]" text="专业负责" type="info" size="mini" color="#657390" bg-color="#f5f7f9" border-color="#f5f7f9" />\n\t\t\t\t<u-tag class="mt-[10rpx] mr-[10rpx]" text="专业负责" type="info" size="mini" color="#657390" bg-color="#f5f7f9" border-color="#f5f7f9" />\n\t\t\t\t<u-tag class="mt-[10rpx] mr-[10rpx]" text="专业负责" type="info" size="mini" color="#657390" bg-color="#f5f7f9" border-color="#f5f7f9" />\n\t\t\t\t<u-tag class="mt-[10rpx] mr-[10rpx]" text="专业负责" type="info" size="mini" color="#657390" bg-color="#f5f7f9" border-color="#f5f7f9" />\n\t\t\t</view> '),g(s,{class:"pt-[20rpx] pb-[30rpx] text-[#222222] text-[28rpx]"},{default:c((()=>[T(B(t.data.comment),1)])),_:1}),g(s,{class:"flex flex-wrap mb-[20rpx]"},{default:c((()=>[(r(!0),S(N,null,z(t.data.goods_comment_image,((t,e)=>(r(),n(s,{key:e,class:f(["mt-[10rpx]",{"mr-[10rpx]":(e+1)%4!=0}]),onClick:j((e=>{return a=t.uri,void R({urls:[a]});var a}),["stop"])},{default:c((()=>[g(i,{src:t.uri,width:"150",height:"150","border-radius":"14rpx"},null,8,["src"])])),_:2},1032,["class","onClick"])))),128))])),_:1}),g(s,{class:"text-sm text-muted"},{default:c((()=>[T("已购 "+B(t.data.goods_sku_desc),1)])),_:1})])),_:1})])),_:1})}}),[["__scopeId","data-v-fd36dcca"]]);const K=e({__name:"list",props:{i:null,index:null,type:{default:0}},setup(t){const e=t,i=W(null),s=a([]),o=a(!0);l((()=>e.index),(async()=>{var t;await _(),e.i==e.index&&$(o)&&(o.value=!1,null==(t=i.value)||t.reload())}),{immediate:!0});const u=async(t,a)=>{try{const{lists:s}=await P({type:e.type,pageNo:t,pageSize:a});i.value.complete(s)}catch(s){console.log("报错=>",s),i.value.complete(!1)}};return(e,a)=>{const o=k(w("z-paging"),F);return r(),n(o,{"auto-show-back-to-top":"",auto:t.i==t.index,ref_key:"paging",ref:i,modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=t=>s.value=t),"data-key":t.i,onQuery:u,fixed:!1,height:"100%"},{default:c((()=>[(r(!0),S(N,null,z(s.value,((t,e)=>(r(),n(J,{key:e,data:t},null,8,["data"])))),128))])),_:1},8,["auto","modelValue","data-key"])}}});var tt=V(e({__name:"index",setup(e){const i=a(8),s=a([]),l=a(0),u=y(),f=o((()=>u.token)),h=t=>{l.value=Number(t)};return Y((t=>{i.value=t.id||0,(async()=>{s.value=await U({goods_id:i.value})})()})),(e,a)=>{var i;const o=k(w("page-meta"),t),u=v,p=k(w("tab"),D),m=k(w("tabs"),q);return r(),S(N,null,[g(o,{"page-style":e.$theme.pageStyle},null,8,["page-style"]),(null==(i=s.value)?void 0:i.length)?(r(),n(u,{key:0,class:"container"},{default:c((()=>[g(m,{current:l.value,onChange:h,height:"70","bar-width":"60",barStyle:{bottom:"0"},auth:!0,activeColor:e.$theme.primaryColor},{default:c((()=>[(r(!0),S(N,null,z(s.value,((t,e)=>(r(),n(p,{key:e,name:`${t.name}(${t.count})`},{default:c((()=>[$(f)?(r(),n(u,{key:0,class:"List pt-[20rpx]"},{default:c((()=>[g(K,{type:t.type,i:e,index:l.value},null,8,["type","i","index"])])),_:2},1024)):d("v-if",!0)])),_:2},1032,["name"])))),128))])),_:1},8,["current","activeColor"])])),_:1})):d("v-if",!0)],64)}}}),[["__scopeId","data-v-4328c04a"]]);export{tt as default};
