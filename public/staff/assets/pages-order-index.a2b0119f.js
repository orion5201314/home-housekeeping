import{f as e,r as t,d as a,o as s,c as r,w as o,e as l,t as d,x as u,p as n,y as f,F as i,b as c,R as p,T as m,I as _,i as x,K as y,s as v,j as g,l as b,ad as j,q as I,g as h,m as k}from"./index.ceec0680.js";import{_ as w}from"./page-meta.7314eaca.js";import{_ as V}from"./u-tabs.893c4858.js";import{_ as z}from"./z-paging.90c0db65.js";import{_ as C}from"./u-image.d192f048.js";import{P as $}from"./index.a4984710.js";import{_ as F}from"./plugin-vue_export-helper.21dcd24c.js";import{o as R}from"./index.4d5e2d68.js";import{b as S}from"./order.30fe33ee.js";import{_ as B}from"./index.18ef6f3f.js";import{r as L}from"./util.52efa071.js";import{_ as U}from"./index.7a520eac.js";import"./u-badge.5f9f6552.js";import"./u-icon.0c807563.js";import"./u-popup.4ec2fed5.js";import"./index.e6d3f860.js";import"./u-button.aab08c00.js";import"./u-empty.4626c10e.js";var q=F(e({__name:"order-card",props:{orderInfo:{default:{}}},setup(e){const v=e,g=()=>{_({url:`/pages/order_detail/index?id=${v.orderInfo.id}`})};return(_,v)=>{const b=x,j=t(a("u-image"),C),I=y;return s(),r(b,{class:"card",onClick:m(g,["stop"])},{default:o((()=>[l(b,{class:"u-flex justify-between"},{default:o((()=>[l(b,{class:"text-[#909399]"},{default:o((()=>[d(u(e.orderInfo.distance),1)])),_:1}),l(b,{class:"font-bold"},{default:o((()=>[d(u(e.orderInfo.order_status_desc),1)])),_:1})])),_:1}),l(b,{class:"u-flex font-bold text-4xl mt-[30rpx] mb-[30rpx]"},{default:o((()=>[l(b,null,{default:o((()=>[d(u(e.orderInfo.appoint_time_day),1)])),_:1}),l(b,{class:"text-[#62cb81] ml-[20rpx]"},{default:o((()=>[d(u(e.orderInfo.appoint_time_slot),1)])),_:1})])),_:1}),(s(!0),n(i,null,f(e.orderInfo.order_goods,(e=>(s(),r(b,{key:e.id,class:"card--main flex"},{default:o((()=>[l(j,{src:e.goods_image,width:"130",height:"130","border-radius":"14rpx"},null,8,["src"]),l(b,{class:"ml-[20rpx] service-text w-[460rpx]"},{default:o((()=>[l(b,{class:"u-flex justify-between"},{default:o((()=>[l(b,{class:"service-text--name truncate"},{default:o((()=>[d(u(e.goods_name),1)])),_:2},1024),l($,{price:e.goods_price,priceFontSize:"30rpx",priceIconFontSize:"22rpx"},null,8,["price"])])),_:2},1024),l(b,{class:"u-flex justify-between mt-[30rpx]"},{default:o((()=>[l(b,{class:"u-flex flex-wrap flex-1"},{default:o((()=>[(s(!0),n(i,null,f(e.goods_sku_arr,((e,t)=>(s(),r(b,{class:"tag",key:t},{default:o((()=>[d(u(e),1)])),_:2},1024)))),128))])),_:2},1024),l(b,{class:"text-sm text-muted"},{default:o((()=>[d("x"+u(e.goods_num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),l(b,{class:"mt-[20rpx] u-flex"},{default:o((()=>[l(b,{class:"font-bold"},{default:o((()=>[d("服务地址：")])),_:1}),l(b,{class:"text-muted"},{default:o((()=>[d(u(e.orderInfo.address_info.city)+" "+u(e.orderInfo.address_info.district)+" ",1),e.orderInfo.order_sub_status>0?(s(),r(I,{key:0},{default:o((()=>[d(u(e.orderInfo.address_info.address),1)])),_:1})):c("v-if",!0)])),_:1})])),_:1}),e.orderInfo.user_remark?(s(),r(b,{key:0,class:"mt-[20rpx]"},{default:o((()=>[l(I,{class:"font-bold"},{default:o((()=>[d("用户备注：")])),_:1}),l(I,{class:"text-muted"},{default:o((()=>[d(u(e.orderInfo.user_remark),1)])),_:1})])),_:1})):c("v-if",!0),l(b,{class:"card--footer flex justify-between items-center"},{default:o((()=>[l(b,{class:"text-[#ff9600] font-bold text-2xl u-flex"},{default:o((()=>[l(b,{class:"text-[24rpx] text-muted"},{default:o((()=>[d("合计：")])),_:1}),l($,{price:e.orderInfo.order_amount},null,8,["price"])])),_:1}),l(b,null,{default:o((()=>[p(_.$slots,"default",{},void 0,!0)])),_:3})])),_:3})])),_:3},8,["onClick"])}}}),[["__scopeId","data-v-4c39494e"]]);const D=e({__name:"order-list",props:{type:{default:1}},emits:["refresh"],setup(e,{emit:d}){const u=e,c=v(null),p=g([]);b((()=>u.type),(()=>{var e;null==(e=c.value)||e.reload()}));const m=async(e,t)=>{try{const{lists:a,extend:s}=await S({type:u.type,page_no:e,page_size:t});c.value.complete(a),d("refresh",s)}catch(a){console.log("报错=>",a),c.value.complete(!1)}};return j((()=>{var e;null==(e=c.value)||e.reload()})),(e,d)=>{const u=t(a("z-paging"),z);return s(),r(u,{"auto-show-back-to-top":"",ref_key:"paging",ref:c,modelValue:p.value,"onUpdate:modelValue":d[1]||(d[1]=e=>p.value=e),onQuery:m,fixed:!1,height:"100%"},{default:o((()=>[(s(!0),n(i,null,f(p.value,((e,t)=>(s(),r(q,{key:t,orderInfo:e},{default:o((()=>[l(R,{type:"list",orderId:null==e?void 0:e.id,orderBtn:e.staff_order_btn,onRefresh:d[0]||(d[0]=e=>I(c).reload())},null,8,["orderId","orderBtn"])])),_:2},1032,["orderInfo"])))),128))])),_:1},8,["modelValue"])}}});var K=F(e({__name:"index",setup(e){const d=h(),u=g([{name:"接单池",type:1,count:0},{name:"待接单",type:2,count:0},{name:"进行中",type:3,count:0},{name:"已完成",type:4},{name:"已关闭",type:5}]),f=g(0),p=e=>{f.value=Number(e)},m=e=>{u.value[0].count=e.grab_num||0,u.value[1].count=e.receive_num||0,u.value[2].count=e.service_num||0};return j((()=>{L("selectDate")})),k((async e=>{f.value=1*(null==e?void 0:e.type)||0,Object.keys(e).length||(f.value=0)})),(e,_)=>{const y=t(a("page-meta"),w),v=t(a("u-tabs"),V),g=x;return s(),n(i,null,[l(y,{"page-style":e.$theme.pageStyle},null,8,["page-style"]),l(g,{class:"order-list"},{default:o((()=>[l(v,{list:u.value,"bg-color":"#ffffff","active-color":e.$theme.primaryColor,"inactive-color":"#000000","is-scroll":!1,modelValue:f.value,"onUpdate:modelValue":_[0]||(_[0]=e=>f.value=e),onChange:p,height:"80"},null,8,["list","active-color","modelValue"]),I(d).isLogin?(s(),r(g,{key:0,class:"orderList pt-[20rpx]"},{default:o((()=>[l(D,{type:u.value[f.value].type,onRefresh:m},null,8,["type"])])),_:1})):(s(),r(g,{key:1},{default:o((()=>[l(U)])),_:1}))])),_:1}),c(" 底部导航栏 "),l(B)],64)}}}),[["__scopeId","data-v-63895508"]]);export{K as default};
