import{e,f as t,o as l,c as a,w as o,k as s,t as r,g as u,V as d,n as i,l as n,A as f,i as c,d as _,q as m,p,X as v,I as x,v as y,F as g,x as h,aC as b,Y as w,m as k,z as C}from"./index-81cd8d96.js";import{_ as j}from"./page-meta.31474f74.js";import{_ as S}from"./u-count-down.a6aaa69e.js";import{_ as z}from"./u-icon.1e505d03.js";import{_ as I}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as $}from"./u-image.b1460259.js";import{_ as B}from"./u-button.392aee34.js";import{d as F}from"./order.8140439c.js";import{O as E}from"./index.2afb2c5e.js";import"./u-number-box.b3630022.js";import"./u-popup.0f1c5899.js";import"./u-input.241f466f.js";import"./emitter.1571a5d9.js";import"./goods.c5f169af.js";const T=I({name:"u-tag",emits:["click","close"],props:{type:{type:String,default:"primary"},disabled:{type:[Boolean,String],default:!1},size:{type:String,default:"default"},shape:{type:String,default:"square"},text:{type:[String,Number],default:""},bgColor:{type:String,default:""},color:{type:String,default:""},borderColor:{type:String,default:""},closeColor:{type:String,default:""},index:{type:[Number,String],default:""},mode:{type:String,default:"light"},closeable:{type:Boolean,default:!1},show:{type:Boolean,default:!0}},data:()=>({}),computed:{customStyle(){let e={};return this.color&&(e.color=this.color),this.bgColor&&(e.backgroundColor=this.bgColor),"plain"==this.mode&&this.color&&!this.borderColor?e.borderColor=this.color:e.borderColor=this.borderColor,e},iconStyle(){if(!this.closeable)return;let e={};return"mini"==this.size?e.fontSize="20rpx":e.fontSize="22rpx","plain"==this.mode||"light"==this.mode?e.color=this.type:"dark"==this.mode&&(e.color="#ffffff"),this.closeColor&&(e.color=this.closeColor),e},closeIconColor(){return this.closeColor?this.closeColor:this.color?this.color:"dark"==this.mode?"#ffffff":this.type}},methods:{clickTag(){this.disabled||this.$emit("click",this.index)},close(){this.$emit("close",this.index)}}},[["render",function(_,m,p,v,x,y){const g=e(t("u-icon"),z),h=c;return p.show?(l(),a(h,{key:0,class:f([[p.disabled?"u-disabled":"","u-size-"+p.size,"u-shape-"+p.shape,"u-mode-"+p.mode+"-"+p.type],"u-tag"]),style:i([y.customStyle]),onClick:y.clickTag},{default:o((()=>[s(r(p.text),1),u(h,{class:"u-icon-wrap",onClick:m[0]||(m[0]=d((()=>{}),["stop"]))},{default:o((()=>[p.closeable?(l(),a(g,{key:0,onClick:y.close,size:"22",color:y.closeIconColor,name:"close",class:"u-close-icon",style:i([y.iconStyle])},null,8,["onClick","color","style"])):n("v-if",!0)])),_:1})])),_:1},8,["class","style","onClick"])):n("v-if",!0)}],["__scopeId","data-v-969b30ce"]]),N=I(_({__name:"index",setup(d){const f=m({order_goods:[],order_amount:"",total_amount:"",total_goods_price:"",order_cancel_time:0}),_=m(""),I=m(0);p((()=>{const e=f.value.order_cancel_time,t=(new Date).getTime()/1e3;I.value=1e3*(e-t)}));const N=async()=>{f.value=await F({id:_.value})};return v((e=>{_.value=parseInt(null==e?void 0:e.id),N()})),x((()=>{N()})),(d,_)=>{const m=e(t("page-meta"),j),p=k,v=e(t("u-count-down"),S),x=c,F=e(t("u-tag"),T),D=e(t("u-image"),$),M=e(t("u-icon"),z),q=e(t("u-button"),B),G=C("uni-transition");return l(),y(g,null,[u(m,{"page-style":d.$theme.pageStyle},null,8,["page-style"]),u(G,{"mode-class":"zoom-in",needLayout:"true",show:f.value.order_goods.length,duration:500},{default:o((()=>[u(x,{class:"order_detail"},{default:o((()=>[n(" Main Start "),n(" 订单状态 "),u(x,{class:"pt-[40rpx] pb-[40rpx] pl-[24rpx] pr-[24rpx]"},{default:o((()=>[u(p,{class:"text-white text-2xl font-bold"},{default:o((()=>[s(r(f.value.order_status_desc),1)])),_:1}),u(x,{class:"primary mt-[10rpx]"},{default:o((()=>[I.value>0?(l(),a(x,{key:0,class:"flex items-center text-white"},{default:o((()=>[u(p,null,{default:o((()=>[s("剩余")])),_:1}),u(v,{timestamp:I.value,format:"mm分:ss秒","font-size":26,"separator-size":26,onEnd:_[0]||(_[0]=e=>I.value=0)},null,8,["timestamp"]),u(p,null,{default:o((()=>[s("自动关闭")])),_:1})])),_:1})):n("v-if",!0),I.value<=0?(l(),a(x,{key:1,class:"text-white"},{default:o((()=>[s(r(f.value.create_time),1)])),_:1})):n("v-if",!0)])),_:1})])),_:1}),u(x,{class:"info"},{default:o((()=>{var e;return[n(" 地址卡片 "),u(x,{class:"card"},{default:o((()=>[u(F,{text:"预约时间",size:"default",mode:"dark","bg-color":"#f4f4f5",color:"#82848a"}),u(x,{class:"font-bold text-[50rpx] flex mt-[30rpx] mb-[30rpx]"},{default:o((()=>[u(x,null,{default:o((()=>[s(r(f.value.appoint_time_day),1)])),_:1}),u(x,{class:"text-primary ml-[10rpx]"},{default:o((()=>[s(r(f.value.appoint_time_slot),1)])),_:1})])),_:1}),u(x,{class:"mb-[20rpx] font-bold"},{default:o((()=>[s(r(f.value.address_info.province)+" "+r(f.value.address_info.city)+" "+r(f.value.address_info.district)+" "+r(f.value.address_info.address),1)])),_:1}),u(x,{class:"text-sm text-muted"},{default:o((()=>[s(r(f.value.contact)+" "+r(f.value.address_info.sex_desc)+" "+r(f.value.mobile),1)])),_:1})])),_:1}),n(" 师傅 "),(null==(e=f.value)?void 0:e.staff)?(l(),a(x,{key:0,class:"card flex justify-between items-center"},{default:o((()=>[u(x,{class:"u-flex"},{default:o((()=>{var e,t;return[u(D,{src:null==(t=null==(e=f.value)?void 0:e.staff)?void 0:t.work_image,width:"84",height:"84",shape:"circle"},null,8,["src"]),u(x,{class:"ml-3"},{default:o((()=>[u(x,{class:"text-base font-medium"},{default:o((()=>[u(p,{class:"mr-1"},{default:o((()=>{var e,t;return[s(r(null==(t=null==(e=f.value)?void 0:e.staff)?void 0:t.name),1)]})),_:1}),n(' <u-icon name="arrow-right" size="24" color="#999"/> ')])),_:1}),u(x,{class:"mt-1 px-[6rpx] py-[4rpx] rounded",style:{"font-size":"20rpx","background-color":"#FEF4EC",color:"#CB9F5D"}},{default:o((()=>[s(" 实名认证 ")])),_:1})])),_:1})]})),_:1}),u(x,{style:{"z-index":"0"}},{default:o((()=>[u(q,{class:"call-staff",style:{"z-index":"0"},size:"medium",onClick:_[1]||(_[1]=e=>{var t,l,a;return a=null==(l=null==(t=f.value)?void 0:t.staff)?void 0:l.mobile,void w({phoneNumber:a+""})})},{default:o((()=>[u(M,{name:"phone",color:"#333",size:"24rpx"}),u(p,{class:"ml-1"},{default:o((()=>[s("联系师傅")])),_:1})])),_:1})])),_:1})])),_:1})):n("v-if",!0),n(" 商品卡片 "),u(x,{class:"card"},{default:o((()=>[u(x,{class:"goods-item"},{default:o((()=>{var e;return[u(D,{src:null==(e=f.value.order_goods[0])?void 0:e.goods_image,width:"130",height:"130","border-radius":"14rpx"},null,8,["src"]),u(x,{class:"ml-[20rpx] w-[500rpx]"},{default:o((()=>[u(x,{class:"truncate font-bold"},{default:o((()=>{var e;return[s(r(null==(e=f.value.order_goods[0])?void 0:e.goods_name),1)]})),_:1}),u(x,{class:"u-flex flex-wrap flex-1"},{default:o((()=>{var e;return[(l(!0),y(g,null,h(null==(e=f.value.order_goods[0])?void 0:e.goods_sku_arr,((e,t)=>(l(),a(x,{class:"tag",key:t},{default:o((()=>[s(r(e),1)])),_:2},1024)))),128))]})),_:1}),u(x,{class:"mt-[14rpx] u-flex justify-between"},{default:o((()=>[u(x,{class:"font-bold",style:i({color:d.$theme.primaryColor})},{default:o((()=>{var e;return[s("￥"+r(null==(e=f.value.order_goods[0])?void 0:e.goods_price),1)]})),_:1},8,["style"]),u(x,{class:"text-sm text-muted"},{default:o((()=>{var e;return[s("x"+r(null==(e=f.value.order_goods[0])?void 0:e.goods_num),1)]})),_:1})])),_:1})])),_:1})]})),_:1}),f.value.difference_price>0||f.value.additional_price>0?(l(),a(x,{key:0,class:"other-amount"},{default:o((()=>[n(' <view class="u-flex justify-between">\n\t\t\t\t\t\t\t<view>优惠券</view>\n\t\t\t\t\t\t\t<view class="text-[#ff9600]">-￥{{ orderData.order_goods[0]?.goods_price }}</view>\n\t\t\t\t\t\t</view> '),f.value.difference_price>0?(l(),a(x,{key:0,class:"u-flex justify-between mt-[20rpx]"},{default:o((()=>[u(x,null,{default:o((()=>[s("补差价")])),_:1}),u(x,null,{default:o((()=>[s("￥"+r(f.value.difference_price),1)])),_:1})])),_:1})):n("v-if",!0),f.value.additional_price>0?(l(),a(x,{key:1},{default:o((()=>[u(x,{class:"u-flex justify-between mt-[20rpx]"},{default:o((()=>[u(x,null,{default:o((()=>[s("加项")])),_:1}),u(x,null,{default:o((()=>[s("￥"+r(f.value.additional_price),1)])),_:1})])),_:1}),u(x,{class:"additional mt-[10rpx]"},{default:o((()=>[(l(!0),y(g,null,h(f.value.order_additional,(e=>(l(),a(x,{class:"u-flex text-sm mb-[20rpx] justify-between",key:e.id},{default:o((()=>[u(x,{class:"flex-1 truncate w-full"},{default:o((()=>[s(r(e.name)+"/"+r(e.duration)+"分钟/数量:"+r(e.num),1)])),_:2},1024),u(x,null,{default:o((()=>[s("￥"+r(e.price),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):n("v-if",!0)])),_:1})):n("v-if",!0),u(x,{class:"u-flex justify-between goods-total"},{default:o((()=>[u(x),u(x,{class:"u-flex"},{default:o((()=>[u(x,{class:"text-muted"},{default:o((()=>[s("总计：")])),_:1}),u(x,{class:"font-bold text-2xl"},{default:o((()=>[s("¥"+r(f.value.order_amount),1)])),_:1})])),_:1})])),_:1}),f.value.total_refund_amount?(l(),a(x,{key:1,class:"u-flex justify-between"},{default:o((()=>[u(x),u(x,{class:"text-muted"},{default:o((()=>[s(" ( "),u(p,{class:"text-muted text-sm"},{default:o((()=>[s("退款金额：")])),_:1}),u(p,{style:i({color:d.$theme.primaryColor})},{default:o((()=>[s("¥"+r(f.value.total_refund_amount),1)])),_:1},8,["style"]),s(" ) ")])),_:1})])),_:1})):n("v-if",!0)])),_:1}),n(" 订单信息 "),u(x,{class:"card normal text-base"},{default:o((()=>[u(x,{class:"flex justify-between"},{default:o((()=>[u(x,null,{default:o((()=>[s("订单编号")])),_:1}),u(x,{class:"u-flex"},{default:o((()=>[u(x,null,{default:o((()=>[s(r(f.value.sn),1)])),_:1}),u(x,{style:i({padding:"4rpx 14rpx",border:"1px solid "+d.$theme.primaryColor,color:d.$theme.primaryColor,"border-radius":"10rpx","font-size":"24rpx","margin-left":"10rpx"}),onClick:_[2]||(_[2]=e=>{return t=f.value.sn,void b({data:t,showToast:!0});var t})},{default:o((()=>[s("复制")])),_:1},8,["style"])])),_:1})])),_:1}),u(x,{class:"mt-[30rpx] flex justify-between"},{default:o((()=>[u(x,null,{default:o((()=>[s("下单时间")])),_:1}),u(x,null,{default:o((()=>[s(r(f.value.create_time),1)])),_:1})])),_:1}),u(x,{class:"mt-[30rpx] flex justify-between"},{default:o((()=>[u(x,null,{default:o((()=>[s("支付方式")])),_:1}),u(x,null,{default:o((()=>[s(r(f.value.pay_way_desc),1)])),_:1})])),_:1}),u(x,{class:"mt-[30rpx] flex justify-between"},{default:o((()=>[u(x,null,{default:o((()=>[s("订单备注")])),_:1}),u(x,{style:{"max-width":"500rpx","word-wrap":"break-word"}},{default:o((()=>[s(r(f.value.user_remark),1)])),_:1})])),_:1})])),_:1})]})),_:1}),4!==f.value.order_status?(l(),a(x,{key:0,class:"h-[120rpx]"})):n("v-if",!0),n(" Main End ")])),_:1})])),_:1},8,["show"]),n(" Footer Start "),4!==f.value.order_status?(l(),a(x,{key:0,class:"footer flex justify-end"},{default:o((()=>[u(E,{orderId:f.value.id,goodsId:f.value.order_goods[0].goods_id,orderGoodsId:f.value.order_goods[0].id,orderBtn:f.value.user_order_btn,onRefresh:N},null,8,["orderId","goodsId","orderGoodsId","orderBtn"])])),_:1})):n("v-if",!0),n(" Footer End ")],64)}}}),[["__scopeId","data-v-6680928f"]]);export{N as default};
