import{d as e,D as a,q as l,W as o,G as t,o as s,c as u,w as r,g as d,k as n,t as i,ah as p,ai as c,aj as f,ak as m,i as x,e as b,f as _,m as v}from"./index-81cd8d96.js";import{_ as g}from"./u-input.241f466f.js";import{_ as h}from"./u-verification-code.459d0037.js";import{_ as j}from"./u-button.392aee34.js";import{_ as k}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.1e505d03.js";import"./emitter.1571a5d9.js";const y=k(e({__name:"index",setup(e){const k=a(),y=l(""),V=o(),w=e=>{y.value=e},C=t({type:"bind",mobile:"",code:""}),$=async()=>{var e,a;if(!C.mobile)return uni.$u.toast("请输入手机号码");(null==(e=k.value)?void 0:e.canGetCode)&&(await p({scene:c.BIND_MOBILE,mobile:C.mobile}),uni.$u.toast("发送成功"),null==(a=k.value)||a.start())},I=async()=>C.mobile?C.code?(await f(C,{token:V.temToken}),uni.$u.toast("绑定成功"),V.login(V.temToken),void m()):uni.$u.toast("请输入验证码"):uni.$u.toast("请输入手机号码");return(e,a)=>{const l=x,o=b(_("u-input"),g),t=b(_("u-verification-code"),h),p=v,c=b(_("u-button"),j);return s(),u(l,{class:"bg-white min-h-full flex flex-col items-center px-[40rpx] pt-[40rpx] box-border"},{default:r((()=>[d(l,{class:"text-2xl font-bold mb-[60rpx]"},{default:r((()=>[n("绑定您的手机号")])),_:1}),d(l,{class:"w-full"},{default:r((()=>[d(l,null,{default:r((()=>[d(l,{class:"flex mb-[40rpx]"},{default:r((()=>[d(o,{class:"flex-1 bg-[#edf1f3]",style:{"border-radius":"100rpx",padding:"10rpx 30rpx"},modelValue:C.mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>C.mobile=e),border:!1,placeholder:"请输入你常用手机号"},null,8,["modelValue"])])),_:1}),d(l,{class:"flex code-input"},{default:r((()=>[d(o,{class:"flex-1 bg-[#edf1f3]",style:{"border-radius":"100rpx",padding:"10rpx 200rpx 10rpx 30rpx"},modelValue:C.code,"onUpdate:modelValue":a[1]||(a[1]=e=>C.code=e),placeholder:"请输入验证码",border:!1},null,8,["modelValue"]),d(l,{class:"code",onClick:$},{default:r((()=>[d(t,{ref_key:"uCodeRef",ref:k,seconds:60,onChange:w,"change-text":"x秒"},null,512),d(p,null,{default:r((()=>[n(i(y.value),1)])),_:1})])),_:1})])),_:1})])),_:1}),d(l,{class:"mt-[100rpx]"},{default:r((()=>[d(c,{type:"error",onClick:I},{default:r((()=>[n(" 确定 ")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-b3f8613c"]]);export{y as default};
