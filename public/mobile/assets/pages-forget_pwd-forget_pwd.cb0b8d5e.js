import{d as e,D as a,q as l,a as s,W as o,b as t,G as r,X as d,o as u,c as i,w as n,g as p,k as c,t as f,l as m,u as x,ah as b,ai as _,a4 as g,aM as v,i as w,e as h,f as y,m as V,a8 as j}from"./index-81cd8d96.js";import{_ as k}from"./u-input.241f466f.js";import{_ as C}from"./u-verification-code.459d0037.js";import{v as $}from"./util.4309b5a4.js";import{_ as R}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.1e505d03.js";import"./emitter.1571a5d9.js";const S=R(e({__name:"forget_pwd",setup(e){const R=a(),S=l(""),U=s();o(),t((()=>1==U.config.coerce_mobile));const D=r({mobile:"",code:"",password:""}),E=x(),G=e=>{S.value=e},M=async()=>{var e,a;if(!D.mobile)return uni.$u.toast("请输入手机号码");(null==(e=R.value)?void 0:e.canGetCode)&&(await b({scene:_.RESET_PASSWORD,mobile:D.mobile}),uni.$u.toast("发送成功"),null==(a=R.value)||a.start())},P=async()=>D.mobile?D.password?D.code?$(D.password)?(g({title:"请稍后..."}),await v(D),void E.navigateBack()):uni.$u.toast("密码应为6-20位数字+英文"):uni.$u.toast("请输入验证码"):uni.$u.toast("请输入密码"):uni.$u.toast("请输入手机号码");return d((e=>{D.mobile=(null==e?void 0:e.mobile)||""})),(e,a)=>{const l=w,s=h(y("u-input"),k),o=h(y("u-verification-code"),C),t=V,r=j;return u(),i(l,{class:"bg-white min-h-full flex flex-col items-center px-[40rpx] pt-[40rpx] box-border"},{default:n((()=>[p(l,{class:"text-2xl font-bold mb-[60rpx]"},{default:n((()=>[c("重新设置密码")])),_:1}),p(l,{class:"w-full"},{default:n((()=>[p(l,null,{default:n((()=>[p(l,{class:"flex mb-[40rpx]"},{default:n((()=>[p(s,{class:"flex-1 bg-[#edf1f3]",style:{"border-radius":"100rpx",padding:"10rpx 30rpx"},modelValue:D.mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>D.mobile=e),border:!1,placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1}),p(l,{class:"flex mb-[40rpx]"},{default:n((()=>[p(s,{class:"flex-1 bg-[#edf1f3]",style:{"border-radius":"100rpx",padding:"10rpx 30rpx"},modelValue:D.password,"onUpdate:modelValue":a[1]||(a[1]=e=>D.password=e),border:!1,type:"password",placeholder:"请输入新密码"},null,8,["modelValue"])])),_:1}),p(l,{class:"flex code-input"},{default:n((()=>[p(s,{class:"flex-1 bg-[#edf1f3]",style:{"border-radius":"100rpx",padding:"10rpx 200rpx 10rpx 30rpx"},modelValue:D.code,"onUpdate:modelValue":a[2]||(a[2]=e=>D.code=e),placeholder:"请输入验证码",border:!1},null,8,["modelValue"]),p(l,{class:"code",onClick:M},{default:n((()=>[p(o,{ref_key:"uCodeRef",ref:R,seconds:60,onChange:G,"change-text":"x秒"},null,512),p(t,null,{default:n((()=>[c(f(S.value),1)])),_:1})])),_:1})])),_:1})])),_:1}),p(l,{class:"mt-[100rpx]"},{default:n((()=>[p(r,{class:"bg-primary text-lg text-white",onClick:P},{default:n((()=>[c(" 确认 ")])),_:1}),m(' <u-button type="error" @click="handleConfirm"> 完成并登录 </u-button> ')])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-a366e20b"]]);export{S as default};
