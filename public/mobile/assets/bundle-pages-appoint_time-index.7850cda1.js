import{d as e,q as a,X as t,I as s,o as l,v as n,l as r,g as u,w as i,F as o,x as d,bf as c,i as m,U as v,c as p,A as _,k as f,t as b,b0 as g,az as k,ak as y,ac as D}from"./index-81cd8d96.js";import{t as w}from"./util.4309b5a4.js";import{c as x}from"./goods.c5f169af.js";import{_ as N}from"./_plugin-vue_export-helper.1b428a4d.js";const j=N(e({__name:"index",setup(e){const N=a([]),j=a(0),C=a(0),M=a([]),S=a({goods_num:"",id:""}),h=e=>{const a=new Date,t=a.getMinutes(),s=a.getHours()+""+(t<=9?"0"+t:t);return e.map((e=>{const a=e.end_time.replace(":","");e.disabled=Number(s)-Number(a)>=0})),e},H=e=>{const a=[],t=(new Date).getTime();for(let s=0;s<=e;s++){const e=t+24*s*60*60*1e3,l=new Date(e).getFullYear(),n=new Date(e).getMonth()+1,r=new Date(e).getDay(),u=new Date(e).getDate();a.push({year:l,week:E(r,s),date:(n<=9?"0"+n:n)+"-"+(u<=9?"0"+u:u)})}return a},E=(e,a)=>0===a?"今天":1===a?"明天":0===e?"周日":1===e?"周一":2===e?"周二":3===e?"周三":4===e?"周四":5===e?"周五":6===e?"周六":void 0,F=e=>{D({url:e})};return t((e=>{if(e.params){const a=JSON.parse(e.params);S.value=a}})),s((()=>{(async()=>{const{appoint_time:e,order_time:a}=await x();M.value=h(e),N.value=H(a),c({key:"selectDate",success:e=>{j.value=e.data[0],C.value=e.data[1]}})})()})),(e,a)=>{const t=m,s=v;return l(),n(o,null,[r(" Header Start "),u(s,{class:"scroll-view-box","scroll-x":"true"},{default:i((()=>[(l(!0),n(o,null,d(N.value,((e,a)=>(l(),p(t,{key:a,class:_(["day text-base",{active:j.value==a}]),onClick:e=>j.value=a},{default:i((()=>[u(t,null,{default:i((()=>[f(b(e.week),1)])),_:2},1024),u(t,{class:"mt-[10rpx]"},{default:i((()=>[f(b(e.date),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1}),r(" Header End "),r(" Main Start "),u(t,{class:"time-box"},{default:i((()=>[(l(!0),n(o,null,d(M.value,((e,a)=>(l(),p(t,{key:a,class:_(["time-item",{select:C.value==a,disabled:0===j.value&&e.disabled}]),onClick:t=>((e,a)=>{if(a)return w("服务时间段已过！请选择其他时间段");C.value=e,g({key:"selectDate",data:[j.value,C.value]});const t=N.value[j.value],s=M.value[e],l={year:t.year,date:t.date,start_time:s.start_time,end_time:s.end_time};if(""==S.value.id)k("appointTime",l),y();else{const e={goodsData:S.value,appointData:l};F(`/pages/order_buy/index?params=${JSON.stringify(e)}`)}})(a,0===j.value&&e.disabled)},{default:i((()=>[f(b(e.start_time)+" - "+b(e.end_time),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),r(" Main End ")],64)}}}),[["__scopeId","data-v-01bc18be"]]);export{j as default};
