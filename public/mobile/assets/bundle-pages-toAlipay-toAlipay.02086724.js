import{d as e,q as a,X as s,I as r,bF as l,ay as t,Z as o,bG as n,aB as u,o as c,c as i,w as v,j as d,l as m,a7 as p,i as _}from"./index-81cd8d96.js";import{_ as y}from"./_plugin-vue_export-helper.1b428a4d.js";const f=y(e({__name:"toAlipay",setup(e){const y=a(),f=a(),g=a(),w=a();let b=a(!1);const h=a();return s((e=>{y.value=e.order_id,f.value=e.from,g.value=e.pay_way,w.value=e.key})),r((async()=>{if(navigator.userAgent.toLowerCase().match(/MicroMessenger/i))return b.value=!0,void(h.value=setInterval((()=>{l({from:f.value,order_id:y.value},w.value).then((function(e){console.log(e),1==e.pay_status&&(clearInterval(h.value),t({showCancel:!1,content:"支付成功",success:()=>{if("order"==f.value){const e=JSON.stringify({order_id:y.value,from:f.value});o({url:`/bundle/pages/payment_result/payment_result?param=${e}`})}"recharge"==f.value&&o({url:"/bundle/pages/user_wallet/user_wallet?isPay=true"})}}))}))}),1e3));const e=await n({from:f.value,pay_way:g.value,order_id:y.value},w.value);console.log(e);const a=document.createElement("div");a.innerHTML=e.config,document.body.appendChild(a),document.forms[0].submit()})),u((e=>{clearInterval(h.value)})),(e,a)=>{const s=p,r=_;return c(),i(r,{class:"container"},{default:v((()=>[d(b)?(c(),i(s,{key:0,src:"/mobile/assets/Alipay-44240aee.png",class:"img"})):m("v-if",!0)])),_:1})}}}),[["__scopeId","data-v-2e80ad48"]]);export{f as default};
