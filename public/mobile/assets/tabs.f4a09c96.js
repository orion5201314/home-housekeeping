import{d as e,W as t,b as a,q as l,s as o,aR as s,o as u,c as i,w as r,g as n,n as c,A as d,v as f,x as v,F as h,j as p,l as m,r as b,k as g,P as y,R as x,bh as _,e as w,f as k,i as F,U as C,t as S,at as j,B,bi as T}from"./index-81cd8d96.js";import{_ as z}from"./u-badge.d618a77d.js";import{_ as W}from"./u-sticky.d243db70.js";import{_ as R}from"./u-button.392aee34.js";import{_ as $}from"./u-empty.d013e118.js";import{g as H}from"./util.4309b5a4.js";import{u as I}from"./useTouch.dd8eee2b.js";import{_ as O}from"./_plugin-vue_export-helper.1b428a4d.js";const P=O(e({__name:"tabs",props:{isScroll:{type:Boolean,default:!0},current:{default:0},height:{default:80},fontSize:{default:28},duration:{default:.3},activeColor:{default:"#2073F4"},inactiveColor:{default:"#333"},barWidth:{default:40},barHeight:{default:4},gutter:{default:30},bgColor:{default:"#FFFFFF"},name:{default:"name"},count:{default:"count"},offset:{default:[5,20]},bold:{type:Boolean,default:!0},activeItemStyle:{default:{}},showBar:{type:Boolean,default:!0},barStyle:{default:{}},itemWidth:{default:"auto"},isFixed:{type:Boolean,default:!1},top:{default:0},stickyBgColor:{default:"#FFFFFF"},swipeable:{type:Boolean,default:!0},auth:{type:Boolean,default:!1}},emits:["change"],setup(e,{emit:O}){const P=e,X=t(),q=a((()=>X.token)),{touch:A,resetTouchStatus:E,touchStart:M,touchMove:N}=I(),U=l([]),V=l([]),Y=l(0),D=l([]),G=l(0),J=l(0),K=l(0),L=l("cu-tab"),Q=l(P.current),Z=l(!0),ee=l(!1),te=T();o((()=>U.value),(async(e,t)=>{Z.value||e.length===t.length||(Q.value=0),await x(),se()})),o((()=>P.current),((e,t)=>{x((()=>{Q.value=e,ie()}))}),{immediate:!0});const ae=a((()=>{const e={width:P.barWidth+"rpx",transform:`translate(${J.value}px, -100%)`,"transition-duration":`${Z.value?0:P.duration}s`,"background-color":P.activeColor,height:P.barHeight+"rpx",opacity:Z.value?0:1,"border-radius":P.barHeight/2+"px"};return Object.assign(e,P.barStyle),e})),le=a((()=>e=>{let t={height:P.height+"rpx","line-height":P.height+"rpx","font-size":P.fontSize+"rpx",padding:P.isScroll?`0 ${P.gutter}rpx`:"",flex:P.isScroll?"auto":"1",width:`${P.itemWidth}rpx`};return e==Q.value&&P.bold&&(t.fontWeight="bold"),e==Q.value?(t.color=P.activeColor,t=Object.assign(t,P.activeItemStyle)):t.color=P.inactiveColor,t})),oe=()=>{U.value=V.value.map((e=>{const{name:t,dot:a,active:l,inited:o}=e.event,{updateRender:s}=e;return{name:t,dot:a,active:l,inited:o,updateRender:s}}))},se=async()=>{const e=await H("#"+L.value,!1,te);K.value=e.left,G.value=e.width,ue()},ue=()=>{const e=j().in(te);for(let t=0;t<U.value.length;t++)e.select(`#tab-item-${t}`).fields({size:!0,rect:!0});e.exec((e=>{D.value=e,ie()}))},ie=()=>{const e=D.value[Q.value];if(!e)return;const t=e.width,a=e.left-K.value-(G.value-t)/2;Y.value=a<0?0:a;const l=e.left+e.width/2-K.value;J.value=l-B(P.barWidth)/2,1==Z.value&&setTimeout((()=>{Z.value=!1}),100),V.value.forEach(((e,t)=>{const a=t===Q.value;a===e.event.active&&e.event.inited||e.updateRender(a)}))},re=e=>{P.swipeable&&(ee.value=!0,M(e))},ne=e=>{P.swipeable&&ee.value&&N(e)},ce=()=>{if(!P.swipeable||!ee.value)return;if("horizontal"===A.direction&&A.offsetX>=50){let e,t=U.value.length,a=Q.value;e=A.deltaX<=0?a>=t-1?0:a+1:a<=0?t-1:a-1,x((()=>{Q.value=e,ie()})),O("change",e)}ee.value=!1};return s((()=>{oe()})),_("handleChange",((e,t)=>{V.value.push({event:e,updateRender:t})})),_("updateTabs",oe),(t,a)=>{const l=w(k("u-badge"),z),o=F,s=C,_=w(k("u-sticky"),W),j=w(k("u-button"),R),B=w(k("u-empty"),$);return u(),i(o,{class:"tabs"},{default:r((()=>[n(_,{enable:e.isFixed,"bg-color":e.stickyBgColor,"offset-top":e.top,"h5-nav-height":0},{default:r((()=>[n(o,{id:L.value,style:c({background:e.bgColor})},{default:r((()=>[n(s,{style:c({height:e.height+"rpx"}),"scroll-x":"",class:"scroll-view","scroll-left":Y.value,"scroll-with-animation":""},{default:r((()=>[n(o,{class:d(["scroll-box",{"tabs-scorll-flex":!e.isScroll}])},{default:r((()=>[(u(!0),f(h,null,v(U.value,((t,a)=>(u(),i(o,{class:"tab-item line1",id:"tab-item-"+a,key:a,onClick:e=>(e=>{e!=Q.value&&(x((()=>{Q.value=e,ie()})),O("change",e))})(a),style:c([p(le)(a)])},{default:r((()=>[n(l,{count:t[e.count]||t.dot||0,offset:e.offset,size:"mini"},null,8,["count","offset"]),g(" "+S(t[e.name]||t.name),1)])),_:2},1032,["id","onClick","style"])))),128)),e.showBar?(u(),i(o,{key:0,class:"tab-bar",style:c([p(ae)])},null,8,["style"])):m("v-if",!0)])),_:1},8,["class"])])),_:1},8,["style","scroll-left"])])),_:1},8,["id","style"])])),_:1},8,["enable","bg-color","offset-top"]),n(o,{class:"tab-content",onTouchstart:re,onTouchmove:ne,onTouchcancel:ce,onTouchend:ce},{default:r((()=>[m(' <view class="tab-track" :class="{\'tab-animated\': animated}" :style="[trackStyle]"> '),n(o,null,{default:r((()=>[p(q)&&e.auth?b(t.$slots,"default",{key:0},void 0,!0):(u(),i(B,{key:1,src:"/static/images/empty/order.png",text:"您还没有登录～",mode:"data","icon-size":300,"margin-top":"300",color:"#888888"},{bottom:r((()=>[n(o,{class:"mt-4"},{default:r((()=>[n(j,{shape:"circle",onClick:a[0]||(a[0]=e=>{y({url:"/pages/login/login"})}),ripple:!0,"hair-line":!1,type:"info"},{default:r((()=>[g(" 去登录")])),_:1})])),_:1})])),_:1},8,["src"]))])),_:3}),m(" </view> ")])),_:3})])),_:3})}}}),[["__scopeId","data-v-5eb69374"]]);export{P as t};
