import{D as V,F as v,B as x,A as E,C as k}from"./element-plus.c171b4f3.js";import{d as w,s as c,Y as B,b as R,o as h,c as g,T as t,K as o,a2 as A,a as d,S,R as m}from"./@vue.dfea2d30.js";import{P as U}from"./index.36fb24eb.js";import{f as I}from"./index.881dcebb.js";import{b as M}from"./index.42ac867f.js";const P={class:"edit-popup"},Y=w({__name:"adjust-amount",props:{id:{type:Number},value:{type:String},type:{type:Number}},emits:["success","close"],setup(p,{expose:b,emit:i}){const s=p,D=c(),n=c(),e=B({id:s.id,adjust_type:s.type,adjust_action:2,adjust_num:"",remark:""}),j=()=>{var u;(u=n.value)==null||u.open()},y=()=>{i("close")};b({open:j});const F=async()=>{var u;if(Number(e.adjust_num)<=0){I.msgError("\u8BF7\u8F93\u5165\u5927\u4E8E0\u7684\u91D1\u989D");return}await M(e),(u=n.value)==null||u.close(),i("success")};return R(()=>{let u=s.value;return isNaN(Number(e.adjust_num))?0:(e.adjust_action==1?u=Number(u)+Number(e.adjust_num):u=Number(u)-Number(e.adjust_num),u.toFixed(2))}),(u,a)=>{const r=x,_=V,C=v,f=E,N=k;return h(),g("div",P,[t(U,{ref_key:"popupRef",ref:n,title:s.type==1?"\u4FDD\u8BC1\u91D1\u8C03\u6574":"\u4F63\u91D1\u8C03\u6574",async:!0,width:"550px",onConfirm:F,onClose:y},{default:o(()=>[t(N,{onSubmit:a[3]||(a[3]=A(()=>{},["prevent"])),ref_key:"formRef",ref:D,model:e,"label-width":"120px"},{default:o(()=>[t(r,{label:"\u5F53\u524D\u91D1\u989D"},{default:o(()=>[d("div",null,"\xA5 "+S(p.value),1)]),_:1}),t(r,{label:"\u7C7B\u578B"},{default:o(()=>[t(C,{class:"m-r-16",modelValue:e.adjust_action,"onUpdate:modelValue":a[0]||(a[0]=l=>e.adjust_action=l)},{default:o(()=>[t(_,{label:2},{default:o(()=>[m("\u589E\u52A0\u91D1\u989D")]),_:1}),t(_,{label:1},{default:o(()=>[m("\u6263\u51CF\u91D1\u989D")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"\u91D1\u989D",prop:"adjust_num",required:""},{default:o(()=>[d("div",null,[t(f,{class:"ls-input",modelValue:e.adjust_num,"onUpdate:modelValue":a[1]||(a[1]=l=>e.adjust_num=l),type:"number",placeholder:"\u8BF7\u8F93\u5165\u8C03\u6574\u7684\u91D1\u989D",style:{width:"300px"}},{append:o(()=>[m("\u5143")]),_:1},8,["modelValue"])])]),_:1}),t(r,{label:"\u5907\u6CE8",prop:"remark"},{default:o(()=>[d("div",null,[t(f,{class:"ls-input",modelValue:e.remark,"onUpdate:modelValue":a[2]||(a[2]=l=>e.remark=l),maxlength:"50","show-word-limit":"",placeholder:"\u8BF7\u8F93\u5165",style:{width:"300px"}},null,8,["modelValue"])])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{Y as _};
