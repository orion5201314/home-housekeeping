import{D as U,l as h,$ as q,G as I,A as N,B as $,Q as P,R as S,C as G,n as H}from"./element-plus.c171b4f3.js";import{u as K,a as M}from"./vue-router.9d4d3767.js";import{c as Q,d as Y,e as j,f as z}from"./system.91b629e1.js";import{P as m}from"./enum.41ca2dbe.js";import{_ as J}from"./index.e9551a18.js";import{d as L,r as d,Y as O,o as W,c as X,T as a,K as o,R as b}from"./@vue.dfea2d30.js";import{d as Z}from"./index.881dcebb.js";import"./lodash-es.f52bd8b1.js";import"./async-validator.fb49d0f5.js";import"./@vueuse.29b489e3.js";import"./@element-plus.36601d8a.js";import"./dayjs.118a1d63.js";import"./axios.0fee1ac1.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.6b33b650.js";import"./pinia.b9396de9.js";import"./css-color-function.0b1d1468.js";import"./color.db38fb11.js";import"./clone.21471390.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./ms.564e106c.js";import"./nprogress.988d93fe.js";import"./vue-clipboard3.d44f8fc1.js";import"./clipboard.802e3b4c.js";import"./echarts.db1d6bb4.js";import"./zrender.84752e5a.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.7c69c760.js";const ee={class:"substance_edit-help"},ae=L({__name:"edit",setup(ue){const p=d(),B=K(),c=M(),n=d(m.ADD),_=d([]),e=d({id:"",name:"",type:1,command:"",expression:"",status:1,remark:"",params:""}),E=O({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:"blur"}],command:[{required:!0,message:"\u8BF7\u8F93\u5165\u547D\u4EE4",trigger:"blur"}],params:[{required:!0,message:"\u8BF7\u8F93\u5165\u53C2\u6570",trigger:"blur"}],expression:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219",trigger:"blur"}]}),x=l=>{!l||l.validate(u=>{if(u)switch(n.value){case m.ADD:V();return;case m.EDIT:g();return}})},C=()=>{e.value.expression!=""&&F()},F=async()=>{const l=await Q({expression:e.value.expression});_.value=l},V=async()=>{await Y(e.value),setTimeout(()=>c.go(-1),500)},g=async()=>{delete e.value.status_desc,delete e.value.type_desc,await j(e.value),setTimeout(()=>c.go(-1),500)},w=async()=>{const l=await z({id:e.value.id});e.value=l,F()},i=B.query;return i.mode&&(n.value=i.mode),n.value===m.EDIT&&(e.value.id=i.id*1,w()),(l,u)=>{const D=q,v=I,s=N,r=$,y=U,A=h,f=P,k=S,T=G,R=H;return W(),X("div",ee,[a(v,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[a(D,{content:n.value=="add"?"\u65B0\u589E\u5B9A\u65F6\u4EFB\u52A1":"\u7F16\u8F91\u5B9A\u65F6\u4EFB\u52A1",onBack:u[0]||(u[0]=t=>l.$router.go(-1))},null,8,["content"])]),_:1}),a(v,{shadow:"never",class:"!border-none mt-4"},{default:o(()=>[a(T,{rules:E,ref_key:"formRef",ref:p,model:e.value,"label-width":"120px"},{default:o(()=>[a(r,{label:"\u540D\u79F0",prop:"name"},{default:o(()=>[a(s,{modelValue:e.value.name,"onUpdate:modelValue":u[1]||(u[1]=t=>e.value.name=t),"show-word-limit":"",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",class:"max-w-[300px]"},null,8,["modelValue"])]),_:1}),a(r,{label:"\u7C7B\u578B"},{default:o(()=>[a(y,{modelValue:e.value.type,"onUpdate:modelValue":u[2]||(u[2]=t=>e.value.type=t),label:1},{default:o(()=>[b("\u5B9A\u65F6\u4EFB\u52A1")]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"\u547D\u4EE4",prop:"command"},{default:o(()=>[a(s,{modelValue:e.value.command,"onUpdate:modelValue":u[3]||(u[3]=t=>e.value.command=t),class:"max-w-[300px]",placeholder:"\u8BF7\u8F93\u5165thinkphp\u547D\u4EE4\uFF0C\u5982vresion"},null,8,["modelValue"])]),_:1}),a(r,{label:"\u53C2\u6570"},{default:o(()=>[a(s,{modelValue:e.value.params,"onUpdate:modelValue":u[4]||(u[4]=t=>e.value.params=t),class:"max-w-[300px]",placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\uFF0C\u4F8B:--id 8 --name \u6D4B\u8BD5"},null,8,["modelValue"])]),_:1}),a(r,{label:"\u72B6\u6001"},{default:o(()=>[a(A,{modelValue:e.value.status,"onUpdate:modelValue":u[5]||(u[5]=t=>e.value.status=t),"active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1}),a(r,{label:"\u89C4\u5219",prop:"expression"},{default:o(()=>[a(s,{onBlur:C,modelValue:e.value.expression,"onUpdate:modelValue":u[6]||(u[6]=t=>e.value.expression=t),class:"max-w-[300px]",placeholder:"\u8BF7\u8F93\u5165crontab\u89C4\u5219\uFF0C\u4F8B\uFF1A59 * * *"},null,8,["modelValue"])]),_:1}),a(r,null,{default:o(()=>[a(k,{ref:"paneTable",data:_.value,style:{"max-width":"500px"}},{default:o(()=>[a(f,{prop:"time",label:"\u5E8F\u53F7","min-width":"80"}),a(f,{prop:"date",label:"\u6267\u884C\u65F6\u95F4","min-width":"180"})]),_:1},8,["data"])]),_:1}),a(r,{label:"\u5907\u6CE8"},{default:o(()=>[a(s,{type:"textarea",class:"max-w-[300px]",modelValue:e.value.remark,"onUpdate:modelValue":u[7]||(u[7]=t=>e.value.remark=t),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1}),a(J,null,{default:o(()=>[a(R,{type:"primary",onClick:u[8]||(u[8]=t=>x(p.value))},{default:o(()=>[b("\u4FDD\u5B58")]),_:1})]),_:1})])}}});const $e=Z(ae,[["__scopeId","data-v-d4a4cf47"]]);export{$e as default};
