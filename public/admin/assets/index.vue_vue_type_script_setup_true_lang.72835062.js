import{A as ee,B as te,T as le,P as ae,n as j,C as oe,y as se,Q as z,s as L,t as M,Y as Q,R as Y}from"./element-plus.c171b4f3.js";import{d as A,r as N,Y as ue,b as x,k as ne,o as b,J as g,K as l,G,T as e,u as c,R as v,a as p,j as F,a2 as de,S as J,Q as V,c as K}from"./@vue.dfea2d30.js";import{a as ie}from"./lists.0eec2800.js";import{P as re}from"./index.36fb24eb.js";import{_ as ce}from"./index.vue_vue_type_script_setup_true_lang.e49abccb.js";import{u as me}from"./usePaging.2463cc0e.js";import{j as pe,d as O}from"./index.881dcebb.js";const _e={class:"flex items-center"},fe={class:"w-16 ml-2 truncate"},ve={class:"flex justify-end"},be=A({__name:"service-popup",props:{modelValue:{default:[]}},emits:["update:modelValue"],setup(_,{emit:h}){const E=_,n=N(),a=N(E.modelValue),s=ue({name:"",status:""}),{pager:r,getLists:D,resetPage:I,resetParams:m}=me({size:5,fetchFun:ie,params:s}),w=u=>{!u||u.resetFields()},k=()=>{h("update:modelValue",pe(a.value))},B=x(()=>u=>a.value?a.value.some(t=>t.id==u.id):!1),i=x({get:()=>{const{lists:u}=r;if(!a.value)return!1;const t=a.value.map(d=>d.id);return u.length?u.every(d=>t.includes(d.id)):!1},set:u=>{const{lists:t}=r;if(u)for(let d=0;d<t.length;d++){const y=t[d];a.value.map($=>$.id).includes(y.id)||a.value.push(y)}else t.forEach(d=>{R(d)})}}),P=(u,t)=>{u?a.value.push(t):R(t)},R=u=>{const t=a.value.findIndex(d=>d.id==u.id);t!=-1&&(a==null||a.value.splice(t,1))};return D(),ne(()=>{a.value=E.modelValue}),(u,t)=>{const d=ee,y=te,C=le,$=ae,S=j,q=oe,T=se,f=z,H=L,W=M,U=Q,X=Y;return b(),g(re,{class:"inline mr-3",clickModalClose:!1,title:"\u9009\u62E9\u670D\u52A1",center:!0,onClose:t[5]||(t[5]=o=>w(n.value)),onConfirm:k,width:"1050px"},{trigger:l(()=>[G(u.$slots,"default",{},void 0,!0)]),default:l(()=>[e(q,{model:s,ref_key:"serviceFormRef",ref:n,inline:!0,"label-width":"auto"},{default:l(()=>[e(y,{label:"\u670D\u52A1\u540D\u79F0"},{default:l(()=>[e(d,{class:"ls-input",modelValue:s.name,"onUpdate:modelValue":t[0]||(t[0]=o=>s.name=o),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),e(y,{label:"\u72B6\u6001"},{default:l(()=>[e($,{modelValue:s.status,"onUpdate:modelValue":t[1]||(t[1]=o=>s.status=o),placeholder:"\u8BF7\u9009\u62E9",class:"ls-input"},{default:l(()=>[e(C,{label:"\u5168\u90E8",value:"0"}),e(C,{label:"\u9500\u552E\u4E2D",value:"1"}),e(C,{label:"\u4ED3\u5E93\u4E2D",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(y,null,{default:l(()=>[e(S,{type:"primary",onClick:c(D)},{default:l(()=>[v("\u641C\u7D22")]),_:1},8,["onClick"]),e(S,{onClick:c(m)},{default:l(()=>[v("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),p("div",null,[e(X,{ref:"tableDataRef",data:c(r).lists,border:"",style:{width:"100%"}},{default:l(()=>[e(f,{label:"\u9009\u62E9",width:"50"},{header:l(()=>[e(T,{size:"large",modelValue:c(i),"onUpdate:modelValue":t[2]||(t[2]=o=>F(i)?i.value=o:null)},null,8,["modelValue"])]),default:l(({row:o})=>[p("div",{class:"flex row-center",onClick:t[3]||(t[3]=de(()=>{},["stop"]))},[e(T,{"model-value":c(B)(o),onChange:Z=>P(Z,o),size:"large"},null,8,["model-value","onChange"])])]),_:1}),e(f,{label:"\u670D\u52A1\u540D\u79F0","min-width":"200"},{default:l(o=>[p("div",_e,[e(H,{style:{width:"48px",height:"48px"},src:o.row.image,fit:"cover"},null,8,["src"]),e(W,{content:o.row.name,placement:"top"},{default:l(()=>[p("div",fe,J(o.row.name),1)]),_:2},1032,["content"])])]),_:1}),e(f,{property:"category_desc",label:"\u670D\u52A1\u5206\u7C7B","min-width":"160"}),e(f,{property:"price",label:"\u4EF7\u683C","min-width":"100"}),e(f,{property:"unit_desc",label:"\u5355\u4F4D","min-width":"100"}),e(f,{property:"status_desc",label:"\u72B6\u6001","min-width":"120"},{default:l(o=>[o.row.status==1?(b(),g(U,{key:0,type:"success"},{default:l(()=>[v("\u9500\u552E\u4E2D")]),_:1})):V("",!0),o.row.status==0?(b(),g(U,{key:1,type:"info"},{default:l(()=>[v("\u4ED3\u5E93\u4E2D")]),_:1})):V("",!0)]),_:1}),e(f,{property:"create_time",label:"\u521B\u5EFA\u65E5\u671F","min-width":"170"})]),_:1},8,["data"])]),p("div",ve,[e(ce,{modelValue:c(r),"onUpdate:modelValue":t[4]||(t[4]=o=>F(r)?r.value=o:null),onChange:c(D)},null,8,["modelValue","onChange"])])]),_:3})}}});const he=O(be,[["__scopeId","data-v-52c19df7"]]),Ee={key:0,class:"mt-5"},ye={class:"flex items-center"},De={class:"w-[60px] h-[60px]"},ge={class:"ml-2 truncate"},Ve={class:"flex"},we=A({__name:"table-detail",props:{modelValue:{default:[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(_,{emit:h}){const E=_,n=x(()=>E.modelValue||[]),a=s=>{n.value.splice(s,1),h("update:modelValue",n.value)};return(s,r)=>{const D=L,I=M,m=z,w=Q,k=j,B=Y;return c(n).length?(b(),K("div",Ee,[e(B,{ref:"tableDataRef",data:c(n)},{default:l(()=>[e(m,{label:"\u670D\u52A1\u540D\u79F0","min-width":"240"},{default:l(i=>[p("div",ye,[p("div",De,[e(D,{style:{width:"60px",height:"60px"},src:i.row.image,fit:"cover"},null,8,["src"])]),e(I,{content:i.row.name,placement:"top"},{default:l(()=>[p("div",ge,J(i.row.name),1)]),_:2},1032,["content"])])]),_:1}),e(m,{property:"category_desc",label:"\u670D\u52A1\u5206\u7C7B","min-width":"200"}),e(m,{property:"price",label:"\u4EF7\u683C","min-width":"120"}),e(m,{property:"unit_desc",label:"\u5355\u4F4D","min-width":"220"}),e(m,{property:"status_desc",label:"\u9500\u552E\u72B6\u6001","min-width":"200"},{default:l(i=>[i.row.status==1?(b(),g(w,{key:0,type:"success"},{default:l(()=>[v("\u9500\u552E\u4E2D")]),_:1})):V("",!0),i.row.status==0?(b(),g(w,{key:1,type:"info"},{default:l(()=>[v("\u4ED3\u5E93\u4E2D")]),_:1})):V("",!0)]),_:1}),e(m,{property:"create_time",label:"\u521B\u5EFA\u65E5\u671F","min-width":"205"}),e(m,{label:"\u64CD\u4F5C","min-width":"120",fixed:"right"},{default:l(i=>[p("div",Ve,[e(k,{type:"primary",link:"",onClick:P=>a(i.$index),disabled:_.disabled},{default:l(()=>[v("\u79FB\u9664")]),_:2},1032,["onClick","disabled"])])]),_:1})]),_:1},8,["data"])])):V("",!0)}}});const Ce=O(we,[["__scopeId","data-v-2f7bd358"]]),xe={class:"flex flex-col"},Re=A({__name:"index",props:{modelValue:{default:[]},selectData:{default:[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","update:selectData"],setup(_,{emit:h}){const E=_,n=x({get:()=>E.selectData||[],set:a=>{h("update:modelValue",a.map(s=>s.id)),h("update:selectData",a)}});return(a,s)=>(b(),K("div",xe,[e(he,{modelValue:c(n),"onUpdate:modelValue":s[0]||(s[0]=r=>F(n)?n.value=r:null)},{default:l(()=>[G(a.$slots,"popup")]),_:3},8,["modelValue"]),e(Ce,{modelValue:c(n),"onUpdate:modelValue":s[1]||(s[1]=r=>F(n)?n.value=r:null),disabled:_.disabled},null,8,["modelValue","disabled"])]))}});export{Re as _};
