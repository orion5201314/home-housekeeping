import{n as w,O as A,A as U,B as R,C as h}from"./element-plus.c171b4f3.js";import{b as N,c as O,d as S}from"./unit.a624edcb.js";import{P as I}from"./index.36fb24eb.js";import{d as P,r as i,Y as $,o as d,J as m,K as a,R as _,S as v,Q as y,T as o,a as q}from"./@vue.dfea2d30.js";const J=q("div",{class:"form-tips"},"\u6570\u5B57\u8D8A\u5927\uFF0C\u6392\u5E8F\u8D8A\u9760\u524D\uFF0C\u9ED8\u8BA4\u6392\u5E8F\u53F7\u4E3A0",-1),Y=P({__name:"unit-form",props:{type:{default:"add"},id:{default:""},btnText:{default:""}},emits:["refresh"],setup(n,{emit:p}){const s=n,r=i(),t=i({name:"",sort:0}),b=$({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u4F4D",trigger:"blur"}]}),f=i(null),x=u=>{!u||u.resetFields()},B=()=>{s.id&&D(s.id)},D=async u=>{t.value=await N({id:u})},E=async()=>{await O({...t.value}),p("refresh")},C=async()=>{await S({...t.value,id:s.id}),p("refresh")},V=u=>{!u||u.validate(e=>{if(!e)return!1;s.id?C():E(),f.value.visible=!1})};return(u,e)=>{const k=w,g=A,c=U,F=R,T=h;return d(),m(I,{class:"mr-2 inline",ref_key:"popupRef",ref:f,async:!0,clickModalClose:!1,title:n.btnText,center:!0,onClose:e[2]||(e[2]=l=>x(r.value)),onOpen:B,onConfirm:e[3]||(e[3]=l=>V(r.value)),width:"550px"},{trigger:a(()=>[n.type==="primary"?(d(),m(k,{key:0,type:"primary"},{default:a(()=>[_(v(n.btnText),1)]),_:1})):y("",!0),n.btnText==="\u7F16\u8F91"||n.btnText==="\u65B0\u589E\u5355\u4F4D"?(d(),m(g,{key:1,type:"primary",underline:!1},{default:a(()=>[_(v(n.btnText),1)]),_:1})):y("",!0)]),default:a(()=>[o(T,{class:"unit-form",model:t.value,ref_key:"unitFormRef",ref:r,rules:b,"label-width":"80px"},{default:a(()=>[o(F,{label:"\u5355\u4F4D\u540D\u79F0",prop:"name"},{default:a(()=>[o(c,{class:"ls-input w-56",modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.name=l),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),o(F,{label:"\u6392\u5E8F",prop:"sort"},{default:a(()=>[o(c,{class:"ls-input",modelValue:t.value.sort,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.sort=l),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"]),J]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])}}});export{Y as _};
