import{A as N,B as P,_ as I,T as O,P as J,l as K,C as Q}from"./element-plus.c171b4f3.js";import{_ as Y}from"./picker.470e6138.js";import{P as z}from"./index.36fb24eb.js";import{r as G}from"./role.1ffe315d.js";import{r as m}from"./index.881dcebb.js";import{d as H}from"./department.47826682.js";import{b as W}from"./post.cbf53d03.js";import{d as X,s as w,r as Z,b as $,Y as b,o as r,c as V,T as o,K as t,a as B,U as A,a9 as D,J as p,Q as k,u as ee}from"./@vue.dfea2d30.js";function ce(d){return m.get({url:"/auth.admin/lists",params:d})}function le(d){return m.post({url:"/auth.admin/add",params:d})}function ue(d){return m.post({url:"/auth.admin/edit",params:d})}function _e(d){return m.post({url:"/auth.admin/delete",params:d})}const oe={class:"edit-popup"},ae=B("div",{class:"form-tips"},"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A100*100px\uFF0C\u652F\u6301jpg\uFF0Cjpeg\uFF0Cpng\u683C\u5F0F",-1),fe=X({__name:"edit",emits:["success","close"],setup(d,{expose:y,emit:v}){const E=w(),c=w(),_=Z("add"),U=$(()=>_.value=="edit"?"\u7F16\u8F91\u7BA1\u7406\u5458":"\u65B0\u589E\u7BA1\u7406\u5458"),l=b({id:"",account:"",name:"",dept_id:"",jobs_id:"",role_id:"",avatar:"",password:"",password_confirm:"",disable:0,multipoint_login:1,root:0}),x=b({account:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:["blur"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:["blur"]}],role_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272",trigger:["blur"]}]}),n=b({role:[],dept:[],jobs:[]}),j=()=>{G({page_type:0}).then(a=>{n.role=a.lists}),H({page_type:0}).then(a=>{n.dept=a}),W({page_type:0}).then(a=>{n.jobs=a.lists})},h=async()=>{var a,e;await((a=E.value)==null?void 0:a.validate()),_.value=="edit"?await ue(l):await le(l),(e=c.value)==null||e.close(),v("success")},R=(a="add")=>{var e;_.value=a,(e=c.value)==null||e.open()},L=a=>{for(const e in l)a[e]!=null&&a[e]!=null&&(l[e]=a[e])},q=()=>{v("close")};return j(),y({open:R,setFormData:L}),(a,e)=>{const i=N,s=P,S=Y,T=I,f=O,g=J,C=K,M=Q;return r(),V("div",oe,[o(z,{ref_key:"popupRef",ref:c,title:ee(U),async:!0,width:"550px",clickModalClose:!0,onConfirm:h,onClose:q},{default:t(()=>[o(M,{ref_key:"formRef",ref:E,model:l,"label-width":"84px",rules:x},{default:t(()=>[o(s,{label:"\u8D26\u53F7",prop:"account"},{default:t(()=>[o(i,{modelValue:l.account,"onUpdate:modelValue":e[0]||(e[0]=u=>l.account=u),disabled:l.root==1,placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7"},null,8,["modelValue","disabled"])]),_:1}),o(s,{label:"\u5934\u50CF"},{default:t(()=>[B("div",null,[B("div",null,[o(S,{modelValue:l.avatar,"onUpdate:modelValue":e[1]||(e[1]=u=>l.avatar=u),limit:1},null,8,["modelValue"])]),ae])]),_:1}),o(s,{label:"\u540D\u79F0",prop:"name"},{default:t(()=>[o(i,{modelValue:l.name,"onUpdate:modelValue":e[2]||(e[2]=u=>l.name=u),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(s,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"dept_id"},{default:t(()=>[o(T,{class:"flex-1",modelValue:l.dept_id,"onUpdate:modelValue":e[3]||(e[3]=u=>l.dept_id=u),data:n.dept,clearable:"","node-key":"id",props:{value:"id",label:"name",disabled(u){return u.status!==1}},"check-strictly":"","default-expand-all":!0,placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8"},null,8,["modelValue","data","props"])]),_:1}),o(s,{label:"\u5C97\u4F4D",prop:"dept_id"},{default:t(()=>[o(g,{class:"flex-1",modelValue:l.jobs_id,"onUpdate:modelValue":e[4]||(e[4]=u=>l.jobs_id=u),placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D"},{default:t(()=>[(r(!0),V(A,null,D(n.jobs,(u,F)=>(r(),p(f,{key:F,label:u.name,value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(s,{label:"\u89D2\u8272",prop:"role_id"},{default:t(()=>[o(g,{modelValue:l.role_id,"onUpdate:modelValue":e[5]||(e[5]=u=>l.role_id=u),disabled:l.root==1,class:"flex-1",placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272"},{default:t(()=>[l.root==1?(r(),p(f,{key:0,label:"\u7CFB\u7EDF\u7BA1\u7406\u5458",value:0})):k("",!0),(r(!0),V(A,null,D(n.role,(u,F)=>(r(),p(f,{key:F,label:u.name,value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),o(s,{label:"\u5BC6\u7801",prop:"password"},{default:t(()=>[o(i,{modelValue:l.password,"onUpdate:modelValue":e[6]||(e[6]=u=>l.password=u),modelModifiers:{trim:!0},"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),o(s,{label:"\u786E\u8BA4\u5BC6\u7801",prop:"password_confirm"},{default:t(()=>[o(i,{modelValue:l.password_confirm,"onUpdate:modelValue":e[7]||(e[7]=u=>l.password_confirm=u),modelModifiers:{trim:!0},"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),l.root!=1?(r(),p(s,{key:0,label:"\u7BA1\u7406\u5458\u72B6\u6001"},{default:t(()=>[o(C,{modelValue:l.disable,"onUpdate:modelValue":e[8]||(e[8]=u=>l.disable=u),"active-value":0,"inactive-value":1},null,8,["modelValue"])]),_:1})):k("",!0),o(s,{label:"\u591A\u5904\u767B\u5F55"},{default:t(()=>[o(C,{modelValue:l.multipoint_login,"onUpdate:modelValue":e[9]||(e[9]=u=>l.multipoint_login=u),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{fe as _,ce as a,ue as b,_e as c};
