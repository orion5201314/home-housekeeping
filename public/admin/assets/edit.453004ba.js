import{g as pe,D as me,$ as _e,G as ce,n as ve,A as fe,B as ge,T as Fe,P as be,s as xe,t as Ee,Q as ye,R as Be,C as De}from"./element-plus.c171b4f3.js";import{u as ke,a as Ve}from"./vue-router.9d4d3767.js";import{c as we,a as Ce,d as Ae,e as he}from"./index.42ac867f.js";import{_ as Ue}from"./index.e9551a18.js";import{u as Ie,_ as $e}from"./useMap.8da875f9.js";import Se from"./service-popup.ed4d45bf.js";import{_ as y}from"./picker.470e6138.js";import{f as V,d as qe}from"./index.881dcebb.js";import{a as Me}from"./open_city.e37e0c27.js";import{a as Re}from"./skill.0a0211cd.js";import{_ as je}from"./adjust-amount.vue_vue_type_script_setup_true_lang.4813f73a.js";import{d as Te,r as c,Y as We,s as Le,i as Ne,w as Oe,n as O,o as n,c as B,T as u,K as s,u as w,J as v,a,R as d,S as D,Q as C,U as A,a9 as S,b7 as Pe,b6 as Ge}from"./@vue.dfea2d30.js";import"./lodash-es.f52bd8b1.js";import"./async-validator.fb49d0f5.js";import"./@vueuse.29b489e3.js";import"./@element-plus.36601d8a.js";import"./dayjs.118a1d63.js";import"./axios.0fee1ac1.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./normalize-wheel-es.8aeb3683.js";import"./lists.0eec2800.js";import"./index.36fb24eb.js";import"./index.vue_vue_type_script_setup_true_lang.e49abccb.js";import"./usePaging.2463cc0e.js";import"./lodash.6b33b650.js";import"./pinia.b9396de9.js";import"./css-color-function.0b1d1468.js";import"./color.db38fb11.js";import"./clone.21471390.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./ms.564e106c.js";import"./nprogress.988d93fe.js";import"./vue-clipboard3.d44f8fc1.js";import"./clipboard.802e3b4c.js";import"./echarts.db1d6bb4.js";import"./zrender.84752e5a.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.7c69c760.js";import"./index.9b62355d.js";import"./index.20442752.js";import"./index.e214ea88.js";import"./vue3-video-play.63881eaf.js";import"./picker.vue_vue_type_style_index_0_scoped_d04df907_lang.77099439.js";import"./vuedraggable.4f16510f.js";import"./vue.e235a47f.js";import"./sortablejs.891727c6.js";const r=k=>(Pe("data-v-7e410044"),k=k(),Ge(),k),Qe={class:"flex justify-between items-center pl-[80px] pr-[100px]"},ze={class:"flex items-center"},He={class:"ml-2"},Je={class:"truncate"},Ke={key:0,class:"text-[#f63737]"},Ye={class:"text-sm text-[#909399]"},Xe={class:"flex"},Ze={class:"mr-[80px]"},et=r(()=>a("div",{class:"mb-[5px]"},"\u4FDD\u8BC1\u91D1",-1)),tt={class:"flex items-center"},lt={class:"mr-[5px]"},ut=r(()=>a("div",{class:"mb-[5px]"},"\u4F63\u91D1",-1)),at={class:"flex items-center"},st={class:"mr-[5px]"},ot=r(()=>a("div",{class:"font-bold text-[20px] mb-[30px]"},"\u57FA\u672C\u4FE1\u606F",-1)),it={class:"flex"},dt={class:"flex"},nt={class:"flex"},rt={class:"flex"},pt={class:"flex"},mt={class:"flex"},_t=r(()=>a("div",{id:"container",class:"map-container mt-2 w-[600px]"},null,-1)),ct=r(()=>a("div",{class:"font-bold text-[20px] mb-[30px]"},"\u6280\u80FD",-1)),vt={class:"flex"},ft={class:"flex"},gt={class:"flex"},Ft={class:"flex items-center"},bt={class:"w-[60px] h-[60px]"},xt={class:"ml-2 truncate"},Et={class:"flex"},yt=r(()=>a("div",{class:"font-bold text-[20px] mb-[30px]"},"\u8D44\u6599",-1)),Bt={class:"flex"},Dt={class:"flex"},kt={class:"mr-[40px]"},Vt=r(()=>a("div",{class:"text-center mt-[5px]"},[a("span",{class:"text-[#F56C6C]"},"*"),d("\u8EAB\u4EFD\u8BC1\u4EBA\u50CF\u9762 ")],-1)),wt={class:"mr-[40px]"},Ct=r(()=>a("div",{class:"text-center mt-[5px]"},[a("span",{class:"text-[#F56C6C]"},"*"),d("\u8EAB\u4EFD\u8BC1\u56FD\u5FBD\u9762 ")],-1)),At={class:"mr-[40px]"},ht=r(()=>a("div",{class:"text-center mt-[5px]"},[a("span",{class:"text-[#F56C6C]"},"*"),d("\u4EBA\u50CF\u5B9E\u62CD ")],-1)),Ut={class:"mr-[40px]"},It=r(()=>a("div",{class:"text-center mt-[5px]"},[a("span",{class:"text-[#F56C6C]"},"*"),d("\u5DE5\u4F5C\u7167\uFF08\u5934\u50CF\uFF09 ")],-1)),$t=r(()=>a("div",{class:"font-bold text-[20px] mb-[30px]"},"\u8BC1\u4E66",-1)),St={class:"flex"},qt=r(()=>a("div",{class:"font-bold text-[20px] mb-[30px]"},"\u670D\u52A1\u4FE1\u606F",-1)),Mt={class:"flex"},Rt={class:"flex"},jt=Te({__name:"edit",setup(k){const h=c(),{obj:P,addressGeocoder:G,loadTencentMapScript:Q}=Ie(),z=ke(),q=Ve(),f=z.query.id,e=c({mobile:"",name:"",sex:1,age:"",identity_number:"",education:"",nation:"",province_id:"",city_id:"",district_id:"",address:"",longitude:"",latitude:"",skill_id:"",goods_id:[],identity_portrait_image:"",identity_emblem_image:"",portrait_image:"",work_image:"",credentials_image:[],work_status:"1",status:"1",sort:0,sn:"",staff_deposit:0,staff_earnings:0}),H=We({mobile:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",trigger:["blur"]},{pattern:/^1[3-9]\d{9}$/,message:"\u624B\u673A\u53F7\u7801\u8F93\u5165\u6709\u8BEF",trigger:["blur"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E08\u5085\u540D\u79F0",trigger:"blur"}],sex:[{required:!0,message:"\u8BF7\u9009\u62E9\u6027\u522B",trigger:["blur","change"]}],age:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E74\u9F84",trigger:"blur"}],identity_number:[{required:!0,message:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7\u7801",trigger:"blur"}],district_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u5730\u533A",trigger:["blur","change"]}],skill_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u670D\u52A1\u6280\u80FD",trigger:["blur","change"]}],goods_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u670D\u52A1\u9879\u76EE",trigger:["blur","change"]}],work_status:[{required:!0,message:"\u8BF7\u9009\u62E9\u5DE5\u4F5C\u72B6\u6001",trigger:["blur","change"]}],status:[{required:!0,message:"\u8BF7\u9009\u62E9\u670D\u52A1\u72B6\u6001",trigger:["blur","change"]}]}),U=c([]),M=c([]),p=c([]),R=c([]),I=c(!1),j=Le(),$=c([]),T=async o=>{e.value=await we({id:o})},J=async()=>{await Ae({...e.value}),q.back()},K=async()=>{await he({...e.value}),q.back()},Y=o=>{!o||o.validate(t=>{if(!t)return!1;f?K():J()})},X=async()=>{U.value=await Ce({})},Z=async()=>{M.value=await Me({})},ee=async()=>{const o=await Re({});R.value=o},te=o=>{e.value.goods_id=[],p.value=[]},le=async()=>{if(!e.value.province_id||!e.value.city_id||!e.value.district_id){V.msgWarning("\u8BF7\u9009\u62E9\u7701\u5E02\u533A");return}V.loading("\u5730\u56FE\u52A0\u8F7D\u4E2D..."),await G(e.value.province_id,e.value.city_id,e.value.district_id,e.value.address),V.closeLoading()},ue=()=>{V.msgWarning("\u8BF7\u9009\u62E9\u670D\u52A1\u6280\u80FD")},ae=o=>{e.value.goods_id.splice(o,1),p.value.splice(o,1)},se=()=>{e.value.goods_id=[],p.value=[]},W=async(o,t)=>{var m;$.value={type:o,amount:t},I.value=!0,await O(),(m=j.value)==null||m.open()};return Ne(async()=>{var o;f&&(await T(f),p.value=(o=e.value)==null?void 0:o.goods,Q(e.value.latitude,e.value.longitude)),X(),Z(),ee()}),Oe(()=>P,o=>{Object.keys(o).forEach(t=>{let m=o[t];(t=="province_id"||t=="city_id"||t=="district_id")&&(m=parseInt(m)),e.value[t]=m}),console.log("formData",e.value)},{deep:!0}),O(()=>{var o;(o=h.value)==null||o.resetFields()}),(o,t)=>{const m=_e,g=ce,oe=pe,_=ve,b=fe,i=ge,L=me,F=Fe,E=be,ie=xe,de=Ee,N=ye,ne=Be,re=De;return n(),B(A,null,[u(g,{shadow:"never",class:"!border-none"},{default:s(()=>[u(m,{content:w(f)?"\u7F16\u8F91\u5E08\u5085":"\u65B0\u589E\u5E08\u5085",onBack:t[0]||(t[0]=l=>o.$router.back())},null,8,["content"])]),_:1}),u(re,{ref_key:"formRef",ref:h,model:e.value,rules:H,"label-width":"120px",inline:""},{default:s(()=>[w(f)?(n(),v(g,{key:0,shadow:"never",style:{"margin-top":"15px"},class:"!border-none"},{default:s(()=>[a("div",Qe,[a("div",ze,[u(oe,{size:60,src:e.value.work_image,fit:"cover"},null,8,["src"]),a("div",He,[a("div",Je,[d(D(e.value.name),1),e.value.status?C("",!0):(n(),B("span",Ke,"\uFF08\u51BB\u7ED3\uFF09"))]),a("div",Ye,"\u5DE5\u53F7\uFF1A"+D(e.value.sn),1)])]),a("div",Xe,[a("div",Ze,[et,a("div",tt,[a("span",lt,D(e.value.staff_deposit),1),u(_,{type:"primary",link:"",onClick:t[1]||(t[1]=l=>W(1,e.value.staff_deposit))},{default:s(()=>[d("\u7F16\u8F91")]),_:1})])]),a("div",null,[ut,a("div",at,[a("span",st,D(e.value.staff_earnings),1),u(_,{type:"primary",link:"",onClick:t[2]||(t[2]=l=>W(2,e.value.staff_earnings))},{default:s(()=>[d("\u7F16\u8F91")]),_:1})])])])])]),_:1})):C("",!0),u(g,{shadow:"never",style:{"margin-top":"15px"},class:"!border-none"},{default:s(()=>[ot,a("div",it,[u(i,{label:"\u624B\u673A\u53F7:",prop:"mobile"},{default:s(()=>[u(b,{class:"ls-input w-56",modelValue:e.value.mobile,"onUpdate:modelValue":t[3]||(t[3]=l=>e.value.mobile=l),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue"])]),_:1}),u(i,{label:"\u59D3\u540D:",prop:"name"},{default:s(()=>[u(b,{class:"ls-input w-56",modelValue:e.value.name,"onUpdate:modelValue":t[4]||(t[4]=l=>e.value.name=l),placeholder:"\u771F\u5B9E\u59D3\u540D"},null,8,["modelValue"])]),_:1})]),a("div",dt,[u(i,{label:"\u5E74\u9F84:",prop:"age"},{default:s(()=>[u(b,{class:"ls-input w-56",modelValue:e.value.age,"onUpdate:modelValue":t[5]||(t[5]=l=>e.value.age=l),placeholder:"\u5E74\u9F84",type:"number"},null,8,["modelValue"])]),_:1}),u(i,{label:"\u6027\u522B:",prop:"sex"},{default:s(()=>[u(L,{modelValue:e.value.sex,"onUpdate:modelValue":t[6]||(t[6]=l=>e.value.sex=l),name:"1",label:1},{default:s(()=>[d("\u7537")]),_:1},8,["modelValue"]),u(L,{modelValue:e.value.sex,"onUpdate:modelValue":t[7]||(t[7]=l=>e.value.sex=l),name:"2",label:2},{default:s(()=>[d("\u5973")]),_:1},8,["modelValue"])]),_:1})]),a("div",nt,[u(i,{label:"\u8EAB\u4EFD\u8BC1\u53F7\u7801:",prop:"identity_number"},{default:s(()=>[u(b,{class:"ls-input w-56",modelValue:e.value.identity_number,"onUpdate:modelValue":t[8]||(t[8]=l=>e.value.identity_number=l),placeholder:"\u8EAB\u4EFD\u8BC1\u53F7\u7801"},null,8,["modelValue"])]),_:1}),u(i,{label:"\u5B66\u5386:",prop:"education"},{default:s(()=>[u(E,{modelValue:e.value.education,"onUpdate:modelValue":t[9]||(t[9]=l=>e.value.education=l),placeholder:"\u8BF7\u9009\u62E9",class:"ls-input"},{default:s(()=>[(n(!0),B(A,null,S(U.value.education,(l,x)=>(n(),v(F,{key:x,label:l,value:x},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),a("div",rt,[u(i,{label:"\u6C11\u65CF:",prop:"nation"},{default:s(()=>[u(E,{modelValue:e.value.nation,"onUpdate:modelValue":t[10]||(t[10]=l=>e.value.nation=l),placeholder:"\u8BF7\u9009\u62E9",class:"ls-input"},{default:s(()=>[(n(!0),B(A,null,S(U.value.nation,(l,x)=>(n(),v(F,{key:x,label:l,value:x},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(i,{label:"\u5730\u5740:",prop:"district_id"},{default:s(()=>[u($e,{class:"ls-input w-56",province:e.value.province_id,"onUpdate:province":t[11]||(t[11]=l=>e.value.province_id=l),city:e.value.city_id,"onUpdate:city":t[12]||(t[12]=l=>e.value.city_id=l),district:e.value.district_id,"onUpdate:district":t[13]||(t[13]=l=>e.value.district_id=l),data:M.value},null,8,["province","city","district","data"])]),_:1})]),a("div",pt,[u(i,{label:"\u8BE6\u7EC6\u5730\u5740:"},{default:s(()=>[u(b,{class:"ls-input w-56",modelValue:e.value.address,"onUpdate:modelValue":t[14]||(t[14]=l=>e.value.address=l),placeholder:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740 \u4F8B\uFF1A1\u53F7\u697C1\u5355\u5143203\u5BA4"},null,8,["modelValue"])]),_:1}),u(_,{type:"primary",onClick:le},{default:s(()=>[d("\u641C\u7D22\u5730\u56FE")]),_:1})]),a("div",mt,[u(i,{label:" "},{default:s(()=>[_t]),_:1})])]),_:1}),u(g,{shadow:"never",style:{"margin-top":"15px"},class:"!border-none"},{default:s(()=>[ct,a("div",vt,[u(i,{label:"\u670D\u52A1\u6280\u80FD:",prop:"skill_id"},{default:s(()=>[u(E,{class:"mr-2 w-[340px]",modelValue:e.value.skill_id,"onUpdate:modelValue":t[15]||(t[15]=l=>e.value.skill_id=l),placeholder:"\u8BF7\u9009\u62E9",onChange:te},{default:s(()=>[(n(!0),B(A,null,S(R.value,l=>(n(),v(F,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),a("div",ft,[u(i,{label:"\u670D\u52A1\u9879\u76EE:",prop:"goods_id"},{default:s(()=>[e.value.skill_id?(n(),v(Se,{goodsId:e.value.goods_id,"onUpdate:goodsId":t[16]||(t[16]=l=>e.value.goods_id=l),selectData:p.value,"onUpdate:selectData":t[17]||(t[17]=l=>p.value=l),skill_id:e.value.skill_id,key:"goods_id"+e.value.skill_id},{popup:s(()=>[u(_,{type:"primary"},{default:s(()=>[d("\u9009\u62E9\u670D\u52A1")]),_:1})]),_:1},8,["goodsId","selectData","skill_id"])):(n(),v(_,{key:0,type:"primary",onClick:ue},{default:s(()=>[d("\u9009\u62E9\u670D\u52A1")]),_:1})),p.value.length>0?(n(),v(_,{key:2,type:"primary",link:"",onClick:t[18]||(t[18]=l=>se())},{default:s(()=>[d("\u6E05\u7A7A")]),_:1})):C("",!0)]),_:1})]),a("div",gt,[u(i,{label:" "},{default:s(()=>[u(ne,{data:p.value,style:{width:"100%"}},{default:s(()=>[u(N,{label:"\u670D\u52A1\u540D\u79F0","min-width":"600"},{default:s(l=>[a("div",Ft,[a("div",bt,[u(ie,{style:{width:"60px",height:"60px"},src:l.row.image,fit:"cover"},null,8,["src"])]),u(de,{content:l.row.name,placement:"top"},{default:s(()=>[a("div",xt,D(l.row.name),1)]),_:2},1032,["content"])])]),_:1}),u(N,{label:"\u64CD\u4F5C","min-width":"120",fixed:"right"},{default:s(l=>[a("div",Et,[u(_,{type:"primary",link:"",onClick:x=>ae(l.$index)},{default:s(()=>[d("\u79FB\u9664")]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])]),_:1})])]),_:1}),u(g,{shadow:"never",style:{"margin-top":"15px"},class:"!border-none"},{default:s(()=>[yt,a("div",Bt,[u(i,{label:" "},{default:s(()=>[a("div",Dt,[a("div",kt,[u(y,{modelValue:e.value.identity_portrait_image,"onUpdate:modelValue":t[19]||(t[19]=l=>e.value.identity_portrait_image=l),limit:1},null,8,["modelValue"]),Vt]),a("div",wt,[u(y,{modelValue:e.value.identity_emblem_image,"onUpdate:modelValue":t[20]||(t[20]=l=>e.value.identity_emblem_image=l),limit:1},null,8,["modelValue"]),Ct]),a("div",At,[u(y,{modelValue:e.value.portrait_image,"onUpdate:modelValue":t[21]||(t[21]=l=>e.value.portrait_image=l),limit:1},null,8,["modelValue"]),ht]),a("div",Ut,[u(y,{modelValue:e.value.work_image,"onUpdate:modelValue":t[22]||(t[22]=l=>e.value.work_image=l),limit:1},null,8,["modelValue"]),It])])]),_:1})])]),_:1}),u(g,{shadow:"never",style:{"margin-top":"15px"},class:"!border-none"},{default:s(()=>[$t,a("div",St,[u(i,{label:" "},{default:s(()=>[u(y,{modelValue:e.value.credentials_image,"onUpdate:modelValue":t[23]||(t[23]=l=>e.value.credentials_image=l),limit:6},null,8,["modelValue"])]),_:1})])]),_:1}),u(g,{shadow:"never",style:{"margin-top":"15px"},class:"!border-none"},{default:s(()=>[qt,a("div",Mt,[u(i,{label:"\u5DE5\u4F5C\u72B6\u6001:",prop:"work_status"},{default:s(()=>[u(E,{modelValue:e.value.work_status,"onUpdate:modelValue":t[24]||(t[24]=l=>e.value.work_status=l),placeholder:"\u8BF7\u9009\u62E9",class:"ls-input"},{default:s(()=>[u(F,{label:"\u63A5\u5355\u4E2D",value:1}),u(F,{label:"\u4F11\u606F\u4E2D",value:0})]),_:1},8,["modelValue"])]),_:1}),u(i,{label:"\u670D\u52A1\u72B6\u6001:",prop:"status"},{default:s(()=>[u(E,{modelValue:e.value.status,"onUpdate:modelValue":t[25]||(t[25]=l=>e.value.status=l),placeholder:"\u8BF7\u9009\u62E9",class:"ls-input"},{default:s(()=>[u(F,{label:"\u6B63\u5E38",value:1}),u(F,{label:"\u51BB\u7ED3",value:0})]),_:1},8,["modelValue"])]),_:1})]),a("div",Rt,[u(i,{label:"\u6392\u5E8F:",prop:"sort"},{default:s(()=>[u(b,{class:"ls-input w-56",modelValue:e.value.sort,"onUpdate:modelValue":t[26]||(t[26]=l=>e.value.sort=l),placeholder:"\u6392\u5E8F",type:"number"},null,8,["modelValue"])]),_:1})])]),_:1})]),_:1},8,["model","rules"]),u(Ue,null,{default:s(()=>[u(_,{type:"primary",onClick:t[27]||(t[27]=l=>Y(h.value))},{default:s(()=>[d("\u4FDD\u5B58")]),_:1})]),_:1}),I.value?(n(),v(je,{key:0,ref_key:"adjustRef",ref:j,onClose:t[28]||(t[28]=l=>I.value=!1),id:w(f),type:$.value.type,value:$.value.amount,onSuccess:t[29]||(t[29]=l=>T(w(f)))},null,8,["id","type","value"])):C("",!0)],64)}}});const Ml=qe(jt,[["__scopeId","data-v-7e410044"]]);export{Ml as default};
