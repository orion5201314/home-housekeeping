import{n as T,O as h,A as q,B as I,l as O,C as R}from"./element-plus.c171b4f3.js";import{P as U}from"./index.36fb24eb.js";import{r as i,d as N}from"./index.881dcebb.js";import{d as P,r as c,Y as j,o as f,J as g,K as o,R as s,S as y,Q as F,T as u}from"./@vue.dfea2d30.js";function H(e){return i.get({url:"/goods.goods_additional/lists",params:e})}function L(e){return i.get({url:"/goods.goods_additional/detail",params:e})}function M(e){return i.post({url:"/goods.goods_additional/add",params:e})}function $(e){return i.post({url:"/goods.goods_additional/edit",params:e})}function W(e){return i.post({url:"/goods.goods_additional/status",params:e})}function X(e){return i.post({url:"/goods.goods_additional/del",params:e})}const z=P({__name:"additional_form",props:{type:{default:"add"},id:{default:""},btnText:{default:""},goodsId:{default:null}},emits:["refresh"],setup(e,{emit:_}){const r=e,p=c(),a=c({goods_id:r.goodsId,name:"",price:null,duration:null,status:1}),b=j({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0",trigger:"blur"}],price:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EF7\u683C",trigger:"change"}],duration:[{required:!0,message:"\u8BF7\u8F93\u5165\u65F6\u957F",trigger:"change"}],status:[{required:!0,message:"\u662F\u5426\u663E\u793A",trigger:"change"}]}),v=c(null),x=n=>{!n||n.resetFields()},V=()=>{r.id&&C(r.id)},C=async n=>{const t=await L({id:n});a.value=t},E=async()=>{await M({...a.value}),_("refresh")},S=async()=>{await $({...a.value}),_("refresh")},w=n=>{!n||n.validate(async t=>{if(!t)return!1;r.id?await S():await E(),v.value.visible=!1})};return(n,t)=>{const A=T,k=h,m=q,d=I,B=O,D=R;return f(),g(U,{class:"inline mr-2",ref_key:"popupRef",ref:v,async:!0,clickModalClose:!1,title:e.btnText,center:!0,onClose:t[4]||(t[4]=l=>x(p.value)),onOpen:V,onConfirm:t[5]||(t[5]=l=>w(p.value)),width:"550px"},{trigger:o(()=>[e.type==="primary"?(f(),g(A,{key:0,type:"primary"},{default:o(()=>[s(y(e.btnText),1)]),_:1})):F("",!0),e.btnText==="\u7F16\u8F91"?(f(),g(k,{key:1,type:"primary",underline:!1},{default:o(()=>[s(y(e.btnText),1)]),_:1})):F("",!0)]),default:o(()=>[u(D,{ref_key:"formRef",ref:p,model:a.value,rules:b,"label-width":"120px",class:"demo-formData"},{default:o(()=>[u(d,{label:"\u9879\u76EE\u540D\u79F0:",prop:"name"},{default:o(()=>[u(m,{class:"ls-input",modelValue:a.value.name,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value.name=l),maxlength:"10","show-word-limit":""},null,8,["modelValue"])]),_:1}),u(d,{label:"\u4EF7\u683C:",prop:"price"},{default:o(()=>[u(m,{class:"ls-input",modelValue:a.value.price,"onUpdate:modelValue":t[1]||(t[1]=l=>a.value.price=l),type:"number"},{append:o(()=>[s("\u5143")]),_:1},8,["modelValue"])]),_:1}),u(d,{label:"\u65F6\u957F:",prop:"duration"},{default:o(()=>[u(m,{class:"ls-input",modelValue:a.value.duration,"onUpdate:modelValue":t[2]||(t[2]=l=>a.value.duration=l),type:"number"},{append:o(()=>[s("\u5206\u949F")]),_:1},8,["modelValue"])]),_:1}),u(d,{label:"\u72B6\u6001:",prop:"status"},{default:o(()=>[u(B,{modelValue:a.value.status,"onUpdate:modelValue":t[3]||(t[3]=l=>a.value.status=l),"active-text":a.value.status?"\u663E\u793A":"\u9690\u85CF","active-value":1,"inactive-value":0},null,8,["modelValue","active-text"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])}}});const J=N(z,[["__scopeId","data-v-e7944de6"]]),Z=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{J as a,H as b,X as c,W as d,Z as e};
