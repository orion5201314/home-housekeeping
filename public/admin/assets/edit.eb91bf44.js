import{o as w,p as x,$ as q,G as S,C as T,n as $}from"./element-plus.c171b4f3.js";import{u as U,a as N}from"./vue-router.9d4d3767.js";import{b as R,c as h,d as H}from"./lists.0eec2800.js";import L from"./basic.89d40c88.js";import{_ as M}from"./index.vue_vue_type_script_setup_true_lang.b54cc846.js";import{_ as P}from"./index.e9551a18.js";import G from"./sales.6586634f.js";import{_ as J}from"./price.vue_vue_type_script_setup_true_lang.3f3b232b.js";import{f as K}from"./index.881dcebb.js";import{d as Q,r as d,n as j,o as _,c as z,T as t,K as o,u as I,a as c,J as b,R as F,Q as O,U as W}from"./@vue.dfea2d30.js";import"./lodash-es.f52bd8b1.js";import"./async-validator.fb49d0f5.js";import"./@vueuse.29b489e3.js";import"./@element-plus.36601d8a.js";import"./dayjs.118a1d63.js";import"./axios.0fee1ac1.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./normalize-wheel-es.8aeb3683.js";import"./category.d0d61298.js";import"./unit.a624edcb.js";import"./picker.470e6138.js";import"./index.36fb24eb.js";import"./index.9b62355d.js";import"./index.vue_vue_type_script_setup_true_lang.e49abccb.js";import"./index.20442752.js";import"./index.e214ea88.js";import"./usePaging.2463cc0e.js";import"./vue3-video-play.63881eaf.js";import"./picker.vue_vue_type_style_index_0_scoped_d04df907_lang.77099439.js";import"./vuedraggable.4f16510f.js";import"./vue.e235a47f.js";import"./sortablejs.891727c6.js";import"./skill.0a0211cd.js";import"./open_city.e37e0c27.js";import"./lodash.6b33b650.js";import"./pinia.b9396de9.js";import"./css-color-function.0b1d1468.js";import"./color.db38fb11.js";import"./clone.21471390.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./ms.564e106c.js";import"./nprogress.988d93fe.js";import"./vue-clipboard3.d44f8fc1.js";import"./clipboard.802e3b4c.js";import"./echarts.db1d6bb4.js";import"./zrender.84752e5a.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.7c69c760.js";import"./@wangeditor.a385e57b.js";import"./specifications.vue_vue_type_style_index_0_lang.59a80f37.js";const X={class:"xl:flex"},Y={class:"detail ml-[30px]"},Z=c("div",{class:"title"},"- \u670D\u52A1\u8BE6\u60C5 -",-1),ee=["innerHTML"],ut=Q({__name:"edit",setup(te){const g=d(),B=U(),E=N(),n=B.query.id,u=d("basic"),a=d({type:1,name:"",remarks:"",category_id:"",skill_id:"",label:"",goods_image:[],open_city_id:[],appoint_start_time:"",appoint_end_time:"",content:"",virtual_sale_num:"",earnings_ratio:"",sort:"",status:0,sku_type:0,sku_name_list:[{name:"",value:[{value:""}]}],sku:[{id:"",ids:[],sku_value_arr:[],price:"",line_price:"",duration:""}]}),y=d({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u670D\u52A1\u540D\u79F0",trigger:"blur"}],category_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B",trigger:"change"}],skill_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u6280\u80FD",trigger:"change"}],goods_image:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u8F6E\u64AD\u56FE",trigger:"change"}],appoint_start_time:[{required:!0,message:"\u8BF7\u8F93\u5165\u9884\u7EA6\u5F00\u59CB\u65F6\u95F4",trigger:"blur"}],appoint_end_time:[{required:!0,message:"\u8BF7\u8F93\u5165\u9884\u7EA6\u7ED3\u675F\u65F6\u95F4",trigger:"blur"}],earnings_ratio:[{required:!0,message:"\u8BF7\u8F93\u5165\u670D\u52A1\u4F63\u91D1",trigger:"blur"}],status:[{required:!0,message:"\u8BF7\u9009\u62E9\u72B6\u6001",trigger:"change"}],sku_type:[{required:!0,message:"\u8BF7\u9009\u62E9\u89C4\u683C\u7C7B\u578B",trigger:"blur"}]}),V=async()=>{a.value=await R({id:n})},D=async()=>{await h({...a.value}),E.back()},C=async()=>{await H({...a.value}),E.back()},A=()=>{var i;(i=g.value)==null||i.validate((e,m)=>{const p=["name","category_id","skill_id","goods_image","appoint_start_time","appoint_end_time"],s=["sku_type","price","duration"],v=["earnings_ratio","status"];for(const l in m){p.includes(l)?u.value="basic":s.includes(l)?u.value="price":v.includes(l)&&(u.value="sales"),K.msgError(m[l][0].message);return}e&&(n?C():D())})},k=(i=!0)=>{switch(u.value){case"basic":u.value="price";break;case"price":u.value=i?"details":"basic";break;case"details":u.value=i?"sales":"price";break;case"sales":u.value="details";break}};return n&&V(),j(()=>{var i;(i=g.value)==null||i.resetFields()}),(i,e)=>{const m=q,p=S,s=w,v=x,l=T,f=$;return _(),z(W,null,[t(p,{shadow:"never",class:"!border-none"},{default:o(()=>[t(m,{content:I(n)?"\u7F16\u8F91\u670D\u52A1":"\u65B0\u589E\u670D\u52A1",onBack:e[0]||(e[0]=r=>i.$router.back())},null,8,["content"])]),_:1}),t(l,{ref_key:"formRef",ref:g,model:a.value,rules:y.value,"label-width":"120px",class:"demo-formData"},{default:o(()=>[t(p,{class:"!border-none",shadow:"never","body-style":"padding: 0",style:{"margin-top":"15px"}},{default:o(()=>[t(v,{modelValue:u.value,"onUpdate:modelValue":e[5]||(e[5]=r=>u.value=r)},{default:o(()=>[t(s,{label:"\u57FA\u7840\u8BBE\u7F6E",name:"basic"},{default:o(()=>[t(L,{modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=r=>a.value=r)},null,8,["modelValue"])]),_:1}),t(s,{label:"\u670D\u52A1\u4EF7\u683C",name:"price"},{default:o(()=>[t(J,{modelValue:a.value,"onUpdate:modelValue":e[2]||(e[2]=r=>a.value=r)},null,8,["modelValue"])]),_:1}),t(s,{label:"\u670D\u52A1\u8BE6\u60C5",name:"details"},{default:o(()=>[c("div",X,[t(M,{modelValue:a.value.content,"onUpdate:modelValue":e[3]||(e[3]=r=>a.value.content=r),width:"640",height:"664"},null,8,["modelValue"]),c("div",Y,[Z,c("div",{class:"p-[0.6rem] break-words",innerHTML:a.value.content},null,8,ee)])])]),_:1}),t(s,{label:"\u9500\u552E\u8BBE\u7F6E",name:"sales"},{default:o(()=>[t(G,{modelValue:a.value,"onUpdate:modelValue":e[4]||(e[4]=r=>a.value=r)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),t(P,null,{default:o(()=>[u.value!="basic"?(_(),b(f,{key:0,onClick:e[6]||(e[6]=r=>k(!1))},{default:o(()=>[F("\u4E0A\u4E00\u6B65")]),_:1})):O("",!0),u.value!="sales"?(_(),b(f,{key:1,type:"primary",onClick:k},{default:o(()=>[F(" \u4E0B\u4E00\u6B65 ")]),_:1})):(_(),b(f,{key:2,type:"primary",onClick:e[7]||(e[7]=r=>A())},{default:o(()=>[F("\u4FDD\u5B58")]),_:1}))]),_:1})],64)}}});export{ut as default};
