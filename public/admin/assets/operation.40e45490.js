import{d as G,O as H,h as W,i as X,j as Y,A as Z,B as ee,C as re,n as te}from"./element-plus.c171b4f3.js";import{c as ae,d as ue,e as ne,f as oe,g as de,h as ie,i as le}from"./lists.14edb86a.js";import{P as j}from"./index.36fb24eb.js";import{f as F,d as se}from"./index.881dcebb.js";import{_ as fe}from"./refund_lists.vue_vue_type_script_setup_true_lang.eee36e62.js";import{_ as me}from"./dispatch_staff.vue_vue_type_script_setup_true_lang.b5f0a61f.js";import{d as ce,r as E,s as J,af as _e,ap as pe,o as t,c as D,T as a,K as e,L as i,J as u,R as o,Q as n,a as K,U as ye,n as A}from"./@vue.dfea2d30.js";import"./lodash-es.f52bd8b1.js";import"./async-validator.fb49d0f5.js";import"./@vueuse.29b489e3.js";import"./@element-plus.36601d8a.js";import"./dayjs.118a1d63.js";import"./axios.0fee1ac1.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.6b33b650.js";import"./vue-router.9d4d3767.js";import"./pinia.b9396de9.js";import"./css-color-function.0b1d1468.js";import"./color.db38fb11.js";import"./clone.21471390.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./ms.564e106c.js";import"./nprogress.988d93fe.js";import"./vue-clipboard3.d44f8fc1.js";import"./clipboard.802e3b4c.js";import"./echarts.db1d6bb4.js";import"./zrender.84752e5a.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.7c69c760.js";import"./usePaging.2463cc0e.js";import"./index.vue_vue_type_script_setup_true_lang.e49abccb.js";import"./refund.vue_vue_type_script_setup_true_lang.c970ff02.js";const ke={key:0,class:"inline"},Fe={style:{height:"300px"},class:"mt-4"},Ce={key:1,class:"flex mt-3 inline"},be={style:{height:"300px"},class:"mt-4"},ve=ce({__name:"operation",props:{id:{default:0},btnStyle:{default:"text"},admin_order_btn:{default:{}},staff_id:{default:""},settlement_status:{default:0}},emits:["refresh"],setup(r,{emit:p}){const y=r,_=E({order_remarks:""}),B=J(),C=E(!1),h=E(1),x=J(),w=E(!1),b=async()=>{p("refresh")},S=async()=>{var c;await F.confirm("\u786E\u5B9A\u8981\u53D6\u6D88\u8BA2\u5355\u5417\uFF1F"),h.value=1,C.value=!0,await A(),(c=B.value)==null||c.open()},g=async()=>{var c;h.value=2,C.value=!0,await A(),(c=B.value)==null||c.open()},R=async()=>{_.value=await ae({id:y.id})},O=async()=>{await ue({id:y.id,remark:_.value.order_remarks}),p("refresh")},v=async()=>{var c;w.value=!0,await A(),(c=x.value)==null||c.open()},V=async()=>{await F.confirm("\u786E\u5B9A\u5E2E\u5E08\u5085\u63A5\u53D6\u8BA2\u5355\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C"),await ne({id:y.id}),p("refresh")},$=async()=>{await F.confirm("\u786E\u5B9A\u5E08\u5085\u5DF2\u51FA\u53D1\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C"),await oe({id:y.id}),p("refresh")},I=async()=>{await F.confirm("\u786E\u5B9A\u5E08\u5085\u5DF2\u5230\u8FBE\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C"),await de({id:y.id}),p("refresh")},N=async()=>{await F.confirm("\u786E\u5B9A\u5E08\u5085\u5DF2\u5F00\u59CB\u670D\u52A1\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C"),await ie({id:y.id}),p("refresh")},T=async()=>{await F.confirm("\u786E\u5B9A\u5E08\u5085\u5DF2\u5B8C\u6210\u670D\u52A1\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C"),await le({id:y.id}),p("refresh")};return(c,l)=>{const M=_e("arrow-down"),Q=G,s=H,f=W,U=Z,L=ee,P=re,q=X,z=Y,m=te,d=pe("perms");return t(),D(ye,null,[r.btnStyle==="text"?(t(),D("div",ke,[a(z,null,{dropdown:e(()=>[a(q,null,{default:e(()=>[r.admin_order_btn.cancel_btn?i((t(),u(f,{key:0},{default:e(()=>[a(s,{type:"primary",underline:!1,onClick:S},{default:e(()=>[o("\u53D6\u6D88\u8BA2\u5355")]),_:1})]),_:1})),[[d,["order.order/cancel"]]]):n("",!0),r.admin_order_btn.assign_staff_btn?i((t(),u(f,{key:1},{default:e(()=>[a(s,{type:"primary",underline:!1,onClick:v},{default:e(()=>[o("\u5206\u914D\u5E08\u5085")]),_:1})]),_:1})),[[d,["order.order/assign_staff"]]]):n("",!0),r.admin_order_btn.replace_staff_btn?i((t(),u(f,{key:2},{default:e(()=>[a(s,{type:"primary",underline:!1,onClick:v},{default:e(()=>[o("\u66F4\u6362\u5E08\u5085")]),_:1})]),_:1})),[[d,["order.order/replace_staff"]]]):n("",!0),r.admin_order_btn.accept_orders_btn?i((t(),u(f,{key:3},{default:e(()=>[a(s,{type:"primary",underline:!1,onClick:V},{default:e(()=>[o("\u8BA2\u5355\u63A5\u53D6")]),_:1})]),_:1})),[[d,["order.order/accept_orders"]]]):n("",!0),r.admin_order_btn.staff_setout_btn?i((t(),u(f,{key:4},{default:e(()=>[a(s,{type:"primary",underline:!1,onClick:$},{default:e(()=>[o("\u5E08\u5085\u51FA\u53D1")]),_:1})]),_:1})),[[d,["order.order/staff_setout"]]]):n("",!0),r.admin_order_btn.staff_arrive_btn?i((t(),u(f,{key:5},{default:e(()=>[a(s,{type:"primary",underline:!1,onClick:I},{default:e(()=>[o("\u5E08\u5085\u5230\u8FBE")]),_:1})]),_:1})),[[d,["order.order/staff_arrive"]]]):n("",!0),r.admin_order_btn.start_service_btn?i((t(),u(f,{key:6},{default:e(()=>[a(s,{type:"primary",underline:!1,onClick:N},{default:e(()=>[o("\u5F00\u59CB\u670D\u52A1")]),_:1})]),_:1})),[[d,["order.order/start_service"]]]):n("",!0),r.admin_order_btn.finish_btn?i((t(),u(f,{key:7},{default:e(()=>[a(s,{type:"primary",underline:!1,onClick:T},{default:e(()=>[o("\u670D\u52A1\u5B8C\u6210")]),_:1})]),_:1})),[[d,["order.order/finish"]]]):n("",!0),r.admin_order_btn.refund_btn?i((t(),u(f,{key:8},{default:e(()=>[a(s,{type:"primary",underline:!1,onClick:g},{default:e(()=>[o("\u9000\u6B3E")]),_:1})]),_:1})),[[d,["order.order/refund"]]]):n("",!0),r.admin_order_btn.remark_btn?i((t(),u(f,{key:9},{default:e(()=>[a(j,{class:"mr-2 inline",width:"450px",center:!0,onConfirm:O,onOpen:R},{trigger:e(()=>[a(s,{type:"primary",underline:!1},{default:e(()=>[o("\u5546\u5BB6\u5907\u6CE8")]),_:1})]),default:e(()=>[K("div",Fe,[a(P,{ref:"orderFormRef",model:_.value,"label-width":"auto"},{default:e(()=>[a(L,{label:"\u5546\u5BB6\u5907\u6CE8:"},{default:e(()=>[a(U,{class:"ls-input",type:"textarea",modelValue:_.value.order_remarks,"onUpdate:modelValue":l[0]||(l[0]=k=>_.value.order_remarks=k),placeholder:"\u8BF7\u8F93\u5165",rows:10},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1})),[[d,["order.order/remark"]]]):n("",!0)]),_:1})]),default:e(()=>[a(s,{class:"ml-2 mt-[5px]",type:"primary",underline:!1},{default:e(()=>[o(" \u66F4\u591A "),a(Q,{class:"el-icon--right"},{default:e(()=>[a(M)]),_:1})]),_:1})]),_:1})])):(t(),D("div",Ce,[r.admin_order_btn.cancel_btn?i((t(),u(m,{key:0,onClick:S,type:"danger",class:"mx-4"},{default:e(()=>[o("\u53D6\u6D88\u8BA2\u5355")]),_:1})),[[d,["order.order/cancel"]]]):n("",!0),r.admin_order_btn.assign_staff_btn?i((t(),u(m,{key:1,type:"primary",class:"mx-4",onClick:v},{default:e(()=>[o("\u5206\u914D\u5E08\u5085")]),_:1})),[[d,["order.order/assign_staff"]]]):n("",!0),r.admin_order_btn.replace_staff_btn?i((t(),u(m,{key:2,type:"primary",class:"mx-4",onClick:v},{default:e(()=>[o("\u66F4\u6362\u5E08\u5085")]),_:1})),[[d,["order.order/replace_staff"]]]):n("",!0),r.admin_order_btn.accept_orders_btn?i((t(),u(m,{key:3,type:"primary",class:"mx-4",onClick:V},{default:e(()=>[o("\u8BA2\u5355\u63A5\u53D6")]),_:1})),[[d,["order.order/accept_orders"]]]):n("",!0),r.admin_order_btn.staff_setout_btn?i((t(),u(m,{key:4,type:"primary",class:"mx-4",onClick:$},{default:e(()=>[o("\u5E08\u5085\u51FA\u53D1")]),_:1})),[[d,["order.order/staff_setout"]]]):n("",!0),r.admin_order_btn.staff_arrive_btn?i((t(),u(m,{key:5,type:"primary",class:"mx-4",onClick:I},{default:e(()=>[o("\u5E08\u5085\u5230\u8FBE")]),_:1})),[[d,["order.order/staff_arrive"]]]):n("",!0),r.admin_order_btn.start_service_btn?i((t(),u(m,{key:6,type:"primary",class:"mx-4",onClick:N},{default:e(()=>[o("\u5F00\u59CB\u670D\u52A1")]),_:1})),[[d,["order.order/start_service"]]]):n("",!0),r.admin_order_btn.finish_btn?i((t(),u(m,{key:7,type:"primary",class:"mx-4",onClick:T},{default:e(()=>[o("\u670D\u52A1\u5B8C\u6210")]),_:1})),[[d,["order.order/finish"]]]):n("",!0),r.admin_order_btn.refund_btn?i((t(),u(m,{key:8,type:"danger",class:"mx-4",onClick:g},{default:e(()=>[o("\u9000\u6B3E")]),_:1})),[[d,["order.order/refund"]]]):n("",!0),r.admin_order_btn.remark_btn?i((t(),u(j,{key:9,class:"inline",width:"450px",center:!0,onConfirm:O,onOpen:R},{trigger:e(()=>[a(m,null,{default:e(()=>[o("\u5546\u5BB6\u5907\u6CE8")]),_:1})]),default:e(()=>[K("div",be,[a(P,{ref:"orderFormRef",model:_.value,"label-width":"auto"},{default:e(()=>[a(L,{label:"\u5546\u5BB6\u5907\u6CE8:"},{default:e(()=>[a(U,{class:"ls-input",type:"textarea",modelValue:_.value.order_remarks,"onUpdate:modelValue":l[1]||(l[1]=k=>_.value.order_remarks=k),placeholder:"\u8BF7\u8F93\u5165",rows:10},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1})),[[d,["order.order/remark"]]]):n("",!0)])),C.value?(t(),u(fe,{key:2,ref_key:"refundRef",ref:B,onClose:l[2]||(l[2]=k=>b()&&(C.value=!1)),id:r.id,type:h.value,onSuccess:l[3]||(l[3]=k=>b())},null,8,["id","type"])):n("",!0),w.value?(t(),u(me,{key:3,ref_key:"dispatchStaffRef",ref:x,onClose:l[4]||(l[4]=k=>b()&&(w.value=!1)),id:r.id,staff_id:r.staff_id,onSuccess:l[5]||(l[5]=k=>b())},null,8,["id","staff_id"])):n("",!0)],64)}}});const or=se(ve,[["__scopeId","data-v-f04ed571"]]);export{or as default};
